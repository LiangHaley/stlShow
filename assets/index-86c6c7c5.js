import{E as Mt,V as ne,M as xe,T as Te,Q as Ut,S as Bt,a as de,O as kt,b as Je,R as Tn,P as Sn,L as Se,F as Qe,G as st,B as dt,c as Ie,d as ot,e as ct,f as lt,g as Ft,h as yt,i as wt,j as ft,k as Oe,l as sn,m as ut,C as he,D as An,n as on,o as Ln,p as Cn,q as ln,r as ze,s as Xe,t as On,I as Rn,u as He,v as Gt,w as jt,x as Vt,y as Mn,z as zt,A as kn,H as Fn,J as Pn,K as un,N as Nn,U as In,W as Xt,X as Dn,Y as Hn,Z as Un,_ as Kt,$ as Bn,a0 as Gn,a1 as jn,a2 as Vn,a3 as zn,a4 as Xn,a5 as Kn,a6 as Yn,a7 as Wn,a8 as Yt,a9 as $n,aa as Zn,ab as Jn,ac as Qn,ad as qn,ae as er,af as tr,ag as nr,ah as rr,ai as ar,aj as ir}from"./index-7d4676b9.js";var qe=function(n,t){t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=n,this.domElement=t,this.enabled=!0,this.target=new ne,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:xe.ROTATE,MIDDLE:xe.DOLLY,RIGHT:xe.PAN},this.touches={ONE:Te.ROTATE,TWO:Te.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(r),e.update(),o=f.NONE},this.update=function(){var v=new ne,B=new Ut().setFromUnitVectors(n.up,new ne(0,1,0)),j=B.clone().inverse(),J=new ne,Q=new Ut;return function(){var ue=e.object.position;return v.copy(ue).sub(e.target),v.applyQuaternion(B),c.setFromVector3(v),e.autoRotate&&o===f.NONE&&z(ae()),e.enableDamping?(c.theta+=g.theta*e.dampingFactor,c.phi+=g.phi*e.dampingFactor):(c.theta+=g.theta,c.phi+=g.phi),c.theta=Math.max(e.minAzimuthAngle,Math.min(e.maxAzimuthAngle,c.theta)),c.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=w,c.radius=Math.max(e.minDistance,Math.min(e.maxDistance,c.radius)),e.enableDamping===!0?e.target.addScaledVector(S,e.dampingFactor):e.target.add(S),v.setFromSpherical(c),v.applyQuaternion(j),ue.copy(e.target).add(v),e.object.lookAt(e.target),e.enableDamping===!0?(g.theta*=1-e.dampingFactor,g.phi*=1-e.dampingFactor,S.multiplyScalar(1-e.dampingFactor)):(g.set(0,0,0),S.set(0,0,0)),w=1,k||J.distanceToSquared(e.object.position)>p||8*(1-Q.dot(e.object.quaternion))>p?(e.dispatchEvent(r),J.copy(e.object.position),Q.copy(e.object.quaternion),k=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",we,!1),e.domElement.removeEventListener("mousedown",O,!1),e.domElement.removeEventListener("wheel",X,!1),e.domElement.removeEventListener("touchstart",K,!1),e.domElement.removeEventListener("touchend",ie,!1),e.domElement.removeEventListener("touchmove",ee,!1),document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",D,!1),e.domElement.removeEventListener("keydown",W,!1)};var e=this,r={type:"change"},a={type:"start"},s={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},o=f.NONE,p=1e-6,c=new Bt,g=new Bt,w=1,S=new ne,k=!1,C=new de,A=new de,M=new de,F=new de,H=new de,P=new de,N=new de,G=new de,$=new de;function ae(){return 2*Math.PI/60/60*e.autoRotateSpeed}function U(){return Math.pow(.95,e.zoomSpeed)}function z(v){g.theta-=v}function q(v){g.phi-=v}var se=function(){var v=new ne;return function(j,J){v.setFromMatrixColumn(J,0),v.multiplyScalar(-j),S.add(v)}}(),oe=function(){var v=new ne;return function(j,J){e.screenSpacePanning===!0?v.setFromMatrixColumn(J,1):(v.setFromMatrixColumn(J,0),v.crossVectors(e.object.up,v)),v.multiplyScalar(j),S.add(v)}}(),te=function(){var v=new ne;return function(j,J){var Q=e.domElement;if(e.object.isPerspectiveCamera){var Fe=e.object.position;v.copy(Fe).sub(e.target);var ue=v.length();ue*=Math.tan(e.object.fov/2*Math.PI/180),se(2*j*ue/Q.clientHeight,e.object.matrix),oe(2*J*ue/Q.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(se(j*(e.object.right-e.object.left)/e.object.zoom/Q.clientWidth,e.object.matrix),oe(J*(e.object.top-e.object.bottom)/e.object.zoom/Q.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function ce(v){e.object.isPerspectiveCamera?w/=v:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*v)),e.object.updateProjectionMatrix(),k=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function fe(v){e.object.isPerspectiveCamera?w*=v:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/v)),e.object.updateProjectionMatrix(),k=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function le(v){C.set(v.clientX,v.clientY)}function ve(v){N.set(v.clientX,v.clientY)}function V(v){F.set(v.clientX,v.clientY)}function ke(v){A.set(v.clientX,v.clientY),M.subVectors(A,C).multiplyScalar(e.rotateSpeed);var B=e.domElement;z(2*Math.PI*M.x/B.clientHeight),q(2*Math.PI*M.y/B.clientHeight),C.copy(A),e.update()}function Y(v){G.set(v.clientX,v.clientY),$.subVectors(G,N),$.y>0?ce(U()):$.y<0&&fe(U()),N.copy(G),e.update()}function ye(v){H.set(v.clientX,v.clientY),P.subVectors(H,F).multiplyScalar(e.panSpeed),te(P.x,P.y),F.copy(H),e.update()}function l(v){v.deltaY<0?fe(U()):v.deltaY>0&&ce(U()),e.update()}function i(v){var B=!1;switch(v.keyCode){case e.keys.UP:te(0,e.keyPanSpeed),B=!0;break;case e.keys.BOTTOM:te(0,-e.keyPanSpeed),B=!0;break;case e.keys.LEFT:te(e.keyPanSpeed,0),B=!0;break;case e.keys.RIGHT:te(-e.keyPanSpeed,0),B=!0;break}B&&(v.preventDefault(),e.update())}function d(v){if(v.touches.length==1)C.set(v.touches[0].pageX,v.touches[0].pageY);else{var B=.5*(v.touches[0].pageX+v.touches[1].pageX),j=.5*(v.touches[0].pageY+v.touches[1].pageY);C.set(B,j)}}function u(v){if(v.touches.length==1)F.set(v.touches[0].pageX,v.touches[0].pageY);else{var B=.5*(v.touches[0].pageX+v.touches[1].pageX),j=.5*(v.touches[0].pageY+v.touches[1].pageY);F.set(B,j)}}function _(v){var B=v.touches[0].pageX-v.touches[1].pageX,j=v.touches[0].pageY-v.touches[1].pageY,J=Math.sqrt(B*B+j*j);N.set(0,J)}function y(v){e.enableZoom&&_(v),e.enablePan&&u(v)}function h(v){e.enableZoom&&_(v),e.enableRotate&&d(v)}function m(v){if(v.touches.length==1)A.set(v.touches[0].pageX,v.touches[0].pageY);else{var B=.5*(v.touches[0].pageX+v.touches[1].pageX),j=.5*(v.touches[0].pageY+v.touches[1].pageY);A.set(B,j)}M.subVectors(A,C).multiplyScalar(e.rotateSpeed);var J=e.domElement;z(2*Math.PI*M.x/J.clientHeight),q(2*Math.PI*M.y/J.clientHeight),C.copy(A)}function E(v){if(v.touches.length==1)H.set(v.touches[0].pageX,v.touches[0].pageY);else{var B=.5*(v.touches[0].pageX+v.touches[1].pageX),j=.5*(v.touches[0].pageY+v.touches[1].pageY);H.set(B,j)}P.subVectors(H,F).multiplyScalar(e.panSpeed),te(P.x,P.y),F.copy(H)}function x(v){var B=v.touches[0].pageX-v.touches[1].pageX,j=v.touches[0].pageY-v.touches[1].pageY,J=Math.sqrt(B*B+j*j);G.set(0,J),$.set(0,Math.pow(G.y/N.y,e.zoomSpeed)),ce($.y),N.copy(G)}function R(v){e.enableZoom&&x(v),e.enablePan&&E(v)}function L(v){e.enableZoom&&x(v),e.enableRotate&&m(v)}function O(v){if(e.enabled!==!1){v.preventDefault(),e.domElement.focus?e.domElement.focus():window.focus();var B;switch(v.button){case 0:B=e.mouseButtons.LEFT;break;case 1:B=e.mouseButtons.MIDDLE;break;case 2:B=e.mouseButtons.RIGHT;break;default:B=-1}switch(B){case xe.DOLLY:if(e.enableZoom===!1)return;ve(v),o=f.DOLLY;break;case xe.ROTATE:if(v.ctrlKey||v.metaKey||v.shiftKey){if(e.enablePan===!1)return;V(v),o=f.PAN}else{if(e.enableRotate===!1)return;le(v),o=f.ROTATE}break;case xe.PAN:if(v.ctrlKey||v.metaKey||v.shiftKey){if(e.enableRotate===!1)return;le(v),o=f.ROTATE}else{if(e.enablePan===!1)return;V(v),o=f.PAN}break;default:o=f.NONE}o!==f.NONE&&(document.addEventListener("mousemove",I,!1),document.addEventListener("mouseup",D,!1),e.dispatchEvent(a))}}function I(v){if(e.enabled!==!1)switch(v.preventDefault(),o){case f.ROTATE:if(e.enableRotate===!1)return;ke(v);break;case f.DOLLY:if(e.enableZoom===!1)return;Y(v);break;case f.PAN:if(e.enablePan===!1)return;ye(v);break}}function D(v){e.enabled!==!1&&(document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",D,!1),e.dispatchEvent(s),o=f.NONE)}function X(v){e.enabled===!1||e.enableZoom===!1||o!==f.NONE&&o!==f.ROTATE||(v.preventDefault(),v.stopPropagation(),e.dispatchEvent(a),l(v),e.dispatchEvent(s))}function W(v){e.enabled===!1||e.enableKeys===!1||e.enablePan===!1||i(v)}function K(v){if(e.enabled!==!1){switch(v.preventDefault(),v.touches.length){case 1:switch(e.touches.ONE){case Te.ROTATE:if(e.enableRotate===!1)return;d(v),o=f.TOUCH_ROTATE;break;case Te.PAN:if(e.enablePan===!1)return;u(v),o=f.TOUCH_PAN;break;default:o=f.NONE}break;case 2:switch(e.touches.TWO){case Te.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;y(v),o=f.TOUCH_DOLLY_PAN;break;case Te.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;h(v),o=f.TOUCH_DOLLY_ROTATE;break;default:o=f.NONE}break;default:o=f.NONE}o!==f.NONE&&e.dispatchEvent(a)}}function ee(v){if(e.enabled!==!1)switch(v.preventDefault(),v.stopPropagation(),o){case f.TOUCH_ROTATE:if(e.enableRotate===!1)return;m(v),e.update();break;case f.TOUCH_PAN:if(e.enablePan===!1)return;E(v),e.update();break;case f.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;R(v),e.update();break;case f.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;L(v),e.update();break;default:o=f.NONE}}function ie(v){e.enabled!==!1&&(e.dispatchEvent(s),o=f.NONE)}function we(v){e.enabled!==!1&&v.preventDefault()}e.domElement.addEventListener("contextmenu",we,!1),e.domElement.addEventListener("mousedown",O,!1),e.domElement.addEventListener("wheel",X,!1),e.domElement.addEventListener("touchstart",K,!1),e.domElement.addEventListener("touchend",ie,!1),e.domElement.addEventListener("touchmove",ee,!1),e.domElement.addEventListener("keydown",W,!1),e.domElement.tabIndex===-1&&(e.domElement.tabIndex=0),this.update()};qe.prototype=Object.create(Mt.prototype);qe.prototype.constructor=qe;var Et=function(n,t){qe.call(this,n,t),this.mouseButtons.LEFT=xe.PAN,this.mouseButtons.RIGHT=xe.ROTATE,this.touches.ONE=Te.PAN,this.touches.TWO=Te.DOLLY_ROTATE};Et.prototype=Object.create(Mt.prototype);Et.prototype.constructor=Et;var et=function(n){kt.call(this),this.element=n,this.element.style.position="absolute",this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})};et.prototype=Object.create(kt.prototype);et.prototype.constructor=et;var sr=function(){var n=this,t,e,r,a,s=new ne,f=new Je,o=new Je,p={objects:new WeakMap},c=document.createElement("div");c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:t,height:e}},this.setSize=function(C,A){t=C,e=A,r=t/2,a=e/2,c.style.width=C+"px",c.style.height=A+"px"};var g=function(C,A,M){if(C instanceof et){C.onBeforeRender(n,A,M),s.setFromMatrixPosition(C.matrixWorld),s.applyMatrix4(o);var F=C.element,H="translate(-50%,-50%) translate("+(s.x*r+r)+"px,"+(-s.y*a+a)+"px)";F.style.WebkitTransform=H,F.style.MozTransform=H,F.style.oTransform=H,F.style.transform=H,F.style.display=C.visible&&s.z>=-1&&s.z<=1?"":"none";var P={distanceToCameraSquared:w(M,C)};p.objects.set(C,P),F.parentNode!==c&&c.appendChild(F),C.onAfterRender(n,A,M)}for(var N=0,G=C.children.length;N<G;N++)g(C.children[N],A,M)},w=function(){var C=new ne,A=new ne;return function(M,F){return C.setFromMatrixPosition(M.matrixWorld),A.setFromMatrixPosition(F.matrixWorld),C.distanceToSquared(A)}}(),S=function(C){var A=[];return C.traverse(function(M){M instanceof et&&A.push(M)}),A},k=function(C){for(var A=S(C).sort(function(P,N){var G=p.objects.get(P).distanceToCameraSquared,$=p.objects.get(N).distanceToCameraSquared;return G-$}),M=A.length,F=0,H=A.length;F<H;F++)A[F].element.style.zIndex=M-F};this.render=function(C,A){C.autoUpdate===!0&&C.updateMatrixWorld(),A.parent===null&&A.updateMatrixWorld(),f.copy(A.matrixWorldInverse),o.multiplyMatrices(A.projectionMatrix,f),g(C,C,A),k(C)}},xt=function(n,t,e){var r=new Sn,a=new Tn,s=new de,f=new ne,o=new ne,p=new ne,c=new Je,g=[],w=null,S=null,k=this;function C(){e.addEventListener("mousemove",H,!1),e.addEventListener("mousedown",P,!1),e.addEventListener("mouseup",N,!1),e.addEventListener("mouseleave",N,!1),e.addEventListener("touchmove",G,!1),e.addEventListener("touchstart",$,!1),e.addEventListener("touchend",ae,!1)}function A(){e.removeEventListener("mousemove",H,!1),e.removeEventListener("mousedown",P,!1),e.removeEventListener("mouseup",N,!1),e.removeEventListener("mouseleave",N,!1),e.removeEventListener("touchmove",G,!1),e.removeEventListener("touchstart",$,!1),e.removeEventListener("touchend",ae,!1)}function M(){A()}function F(){return n}function H(U){U.preventDefault();var z=e.getBoundingClientRect();if(s.x=(U.clientX-z.left)/z.width*2-1,s.y=-((U.clientY-z.top)/z.height)*2+1,a.setFromCamera(s,t),w&&k.enabled){a.ray.intersectPlane(r,o)&&w.position.copy(o.sub(f).applyMatrix4(c)),k.dispatchEvent({type:"drag",object:w});return}if(g.length=0,a.setFromCamera(s,t),a.intersectObjects(n,!0,g),g.length>0){var q=g[0].object;r.setFromNormalAndCoplanarPoint(t.getWorldDirection(r.normal),p.setFromMatrixPosition(q.matrixWorld)),S!==q&&(k.dispatchEvent({type:"hoveron",object:q}),e.style.cursor="pointer",S=q)}else S!==null&&(k.dispatchEvent({type:"hoveroff",object:S}),e.style.cursor="auto",S=null)}function P(U){U.preventDefault(),g.length=0,a.setFromCamera(s,t),a.intersectObjects(n,!0,g),g.length>0&&(w=k.transformGroup===!0?n[0]:g[0].object,a.ray.intersectPlane(r,o)&&(c.getInverse(w.parent.matrixWorld),f.copy(o).sub(p.setFromMatrixPosition(w.matrixWorld))),e.style.cursor="move",k.dispatchEvent({type:"dragstart",object:w}))}function N(U){U.preventDefault(),w&&(k.dispatchEvent({type:"dragend",object:w}),w=null),e.style.cursor=S?"pointer":"auto"}function G(U){U.preventDefault(),U=U.changedTouches[0];var z=e.getBoundingClientRect();if(s.x=(U.clientX-z.left)/z.width*2-1,s.y=-((U.clientY-z.top)/z.height)*2+1,a.setFromCamera(s,t),w&&k.enabled){a.ray.intersectPlane(r,o)&&w.position.copy(o.sub(f).applyMatrix4(c)),k.dispatchEvent({type:"drag",object:w});return}}function $(U){U.preventDefault(),U=U.changedTouches[0];var z=e.getBoundingClientRect();s.x=(U.clientX-z.left)/z.width*2-1,s.y=-((U.clientY-z.top)/z.height)*2+1,g.length=0,a.setFromCamera(s,t),a.intersectObjects(n,!0,g),g.length>0&&(w=k.transformGroup===!0?n[0]:g[0].object,r.setFromNormalAndCoplanarPoint(t.getWorldDirection(r.normal),p.setFromMatrixPosition(w.matrixWorld)),a.ray.intersectPlane(r,o)&&(c.getInverse(w.parent.matrixWorld),f.copy(o).sub(p.setFromMatrixPosition(w.matrixWorld))),e.style.cursor="move",k.dispatchEvent({type:"dragstart",object:w}))}function ae(U){U.preventDefault(),w&&(k.dispatchEvent({type:"dragend",object:w}),w=null),e.style.cursor="auto"}C(),this.enabled=!0,this.transformGroup=!1,this.activate=C,this.deactivate=A,this.dispose=M,this.getObjects=F};xt.prototype=Object.create(Mt.prototype);xt.prototype.constructor=xt;function dn(){Be.render(Ue,be),Ge.render(Ue,be)}function cn(){requestAnimationFrame(cn),Dt.position.set(be.position.x+100,be.position.y+100,be.position.z+100),dn()}var or=function(){var n=/^[og]\s*(.+)?/,t=/^mtllib /,e=/^usemtl /,r=/^usemap /;function a(){var f={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(o,p){if(this.object&&this.object.fromDeclaration===!1){this.object.name=o,this.object.fromDeclaration=p!==!1;return}var c=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:o||"",fromDeclaration:p!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(w,S){var k=this._finalize(!1);k&&(k.inherited||k.groupCount<=0)&&this.materials.splice(k.index,1);var C={index:this.materials.length,name:w||"",mtllib:Array.isArray(S)&&S.length>0?S[S.length-1]:"",smooth:k!==void 0?k.smooth:this.smooth,groupStart:k!==void 0?k.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(A){var M={index:typeof A=="number"?A:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return M.clone=this.clone.bind(M),M}};return this.materials.push(C),C},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(w){var S=this.currentMaterial();if(S&&S.groupEnd===-1&&(S.groupEnd=this.geometry.vertices.length/3,S.groupCount=S.groupEnd-S.groupStart,S.inherited=!1),w&&this.materials.length>1)for(var k=this.materials.length-1;k>=0;k--)this.materials[k].groupCount<=0&&this.materials.splice(k,1);return w&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),S}},c&&c.name&&typeof c.clone=="function"){var g=c.clone(0);g.inherited=!0,this.object.materials.push(g)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(o,p){var c=parseInt(o,10);return(c>=0?c-1:c+p/3)*3},parseNormalIndex:function(o,p){var c=parseInt(o,10);return(c>=0?c-1:c+p/3)*3},parseUVIndex:function(o,p){var c=parseInt(o,10);return(c>=0?c-1:c+p/2)*2},addVertex:function(o,p,c){var g=this.vertices,w=this.object.geometry.vertices;w.push(g[o+0],g[o+1],g[o+2]),w.push(g[p+0],g[p+1],g[p+2]),w.push(g[c+0],g[c+1],g[c+2])},addVertexPoint:function(o){var p=this.vertices,c=this.object.geometry.vertices;c.push(p[o+0],p[o+1],p[o+2])},addVertexLine:function(o){var p=this.vertices,c=this.object.geometry.vertices;c.push(p[o+0],p[o+1],p[o+2])},addNormal:function(o,p,c){var g=this.normals,w=this.object.geometry.normals;w.push(g[o+0],g[o+1],g[o+2]),w.push(g[p+0],g[p+1],g[p+2]),w.push(g[c+0],g[c+1],g[c+2])},addColor:function(o,p,c){var g=this.colors,w=this.object.geometry.colors;w.push(g[o+0],g[o+1],g[o+2]),w.push(g[p+0],g[p+1],g[p+2]),w.push(g[c+0],g[c+1],g[c+2])},addUV:function(o,p,c){var g=this.uvs,w=this.object.geometry.uvs;w.push(g[o+0],g[o+1]),w.push(g[p+0],g[p+1]),w.push(g[c+0],g[c+1])},addUVLine:function(o){var p=this.uvs,c=this.object.geometry.uvs;c.push(p[o+0],p[o+1])},addFace:function(o,p,c,g,w,S,k,C,A){var M=this.vertices.length,F=this.parseVertexIndex(o,M),H=this.parseVertexIndex(p,M),P=this.parseVertexIndex(c,M);if(this.addVertex(F,H,P),this.colors.length>0&&this.addColor(F,H,P),g!==void 0&&g!==""){var N=this.uvs.length;F=this.parseUVIndex(g,N),H=this.parseUVIndex(w,N),P=this.parseUVIndex(S,N),this.addUV(F,H,P)}if(k!==void 0&&k!==""){var G=this.normals.length;F=this.parseNormalIndex(k,G),H=k===C?F:this.parseNormalIndex(C,G),P=k===A?F:this.parseNormalIndex(A,G),this.addNormal(F,H,P)}},addPointGeometry:function(o){this.object.geometry.type="Points";for(var p=this.vertices.length,c=0,g=o.length;c<g;c++)this.addVertexPoint(this.parseVertexIndex(o[c],p))},addLineGeometry:function(o,p){this.object.geometry.type="Line";for(var c=this.vertices.length,g=this.uvs.length,w=0,S=o.length;w<S;w++)this.addVertexLine(this.parseVertexIndex(o[w],c));for(var k=0,S=p.length;k<S;k++)this.addUVLine(this.parseUVIndex(p[k],g))}};return f.startObject("",!1),f}function s(f){Se.call(this,f),this.materials=null}return s.prototype=Object.assign(Object.create(Se.prototype),{constructor:s,load:function(f,o,p,c){var g=this,w=new Qe(g.manager);w.setPath(this.path),w.load(f,function(S){o(g.parse(S))},p,c)},setMaterials:function(f){return this.materials=f,this},parse:function(f){var o=new a;f.indexOf(`\r
`)!==-1&&(f=f.replace(/\r\n/g,`
`)),f.indexOf(`\\
`)!==-1&&(f=f.replace(/\\\n/g,""));for(var p=f.split(`
`),c="",g="",w=0,S=[],k=typeof"".trimLeft=="function",C=0,A=p.length;C<A;C++)if(c=p[C],c=k?c.trimLeft():c.trim(),w=c.length,w!==0&&(g=c.charAt(0),g!=="#"))if(g==="v"){var M=c.split(/\s+/);switch(M[0]){case"v":o.vertices.push(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3])),M.length>=7&&o.colors.push(parseFloat(M[4]),parseFloat(M[5]),parseFloat(M[6]));break;case"vn":o.normals.push(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3]));break;case"vt":o.uvs.push(parseFloat(M[1]),parseFloat(M[2]));break}}else if(g==="f"){for(var F=c.substr(1).trim(),H=F.split(/\s+/),P=[],N=0,G=H.length;N<G;N++){var $=H[N];if($.length>0){var ae=$.split("/");P.push(ae)}}for(var U=P[0],N=1,G=P.length-1;N<G;N++){var z=P[N],q=P[N+1];o.addFace(U[0],z[0],q[0],U[1],z[1],q[1],U[2],z[2],q[2])}}else if(g==="l"){var se=c.substring(1).trim().split(" "),oe=[],te=[];if(c.indexOf("/")===-1)oe=se;else for(var ce=0,fe=se.length;ce<fe;ce++){var le=se[ce].split("/");le[0]!==""&&oe.push(le[0]),le[1]!==""&&te.push(le[1])}o.addLineGeometry(oe,te)}else if(g==="p"){var F=c.substr(1).trim(),ve=F.split(" ");o.addPointGeometry(ve)}else if((S=n.exec(c))!==null){var V=(" "+S[0].substr(1).trim()).substr(1);o.startObject(V)}else if(e.test(c))o.object.startMaterial(c.substring(7).trim(),o.materialLibraries);else if(t.test(c))o.materialLibraries.push(c.substring(7).trim());else if(r.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(g==="s"){if(S=c.split(" "),S.length>1){var ke=S[1].trim().toLowerCase();o.object.smooth=ke!=="0"&&ke!=="off"}else o.object.smooth=!0;var Y=o.object.currentMaterial();Y&&(Y.smooth=o.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}o.finalize();var ye=new st;ye.materialLibraries=[].concat(o.materialLibraries);for(var C=0,A=o.objects.length;C<A;C++){var l=o.objects[C],i=l.geometry,d=l.materials,u=i.type==="Line",_=i.type==="Points",y=!1;if(i.vertices.length!==0){var h=new dt;h.setAttribute("position",new Ie(i.vertices,3)),i.normals.length>0?h.setAttribute("normal",new Ie(i.normals,3)):h.computeVertexNormals(),i.colors.length>0&&(y=!0,h.setAttribute("color",new Ie(i.colors,3))),i.uvs.length>0&&h.setAttribute("uv",new Ie(i.uvs,2));for(var m=[],E=0,x=d.length;E<x;E++){var R=d[E],L=R.name+"_"+R.smooth+"_"+y,Y=o.materials[L];if(this.materials!==null){if(Y=this.materials.create(R.name),u&&Y&&!(Y instanceof ot)){var O=new ot;ct.prototype.copy.call(O,Y),O.color.copy(Y.color),Y=O}else if(_&&Y&&!(Y instanceof lt)){var I=new lt({size:10,sizeAttenuation:!1});ct.prototype.copy.call(I,Y),I.color.copy(Y.color),I.map=Y.map,Y=I}}Y===void 0&&(u?Y=new ot:_?Y=new lt({size:1,sizeAttenuation:!1}):Y=new Ft,Y.name=R.name,Y.flatShading=!R.smooth,Y.vertexColors=y,o.materials[L]=Y),m.push(Y)}var D;if(m.length>1){for(var E=0,x=d.length;E<x;E++){var R=d[E];h.addGroup(R.groupStart,R.groupCount,E)}u?D=new yt(h,m):_?D=new wt(h,m):D=new ft(h,m)}else u?D=new yt(h,m[0]):_?D=new wt(h,m[0]):D=new ft(h,m[0]);D.name=l.name,ye.add(D)}}return ye}}),s}(),Re=function(n){Se.call(this,n)};Re.prototype=Object.assign(Object.create(Se.prototype),{constructor:Re,load:function(n,t,e,r){var a=this,s=this.path===""?Oe.extractUrlBase(n):this.path,f=new Qe(this.manager);f.setPath(this.path),f.load(n,function(o){t(a.parse(o,s))},e,r)},setMaterialOptions:function(n){return this.materialOptions=n,this},parse:function(n,t){for(var e=n.split(`
`),r={},a=/\s+/,s={},f=0;f<e.length;f++){var o=e[f];if(o=o.trim(),!(o.length===0||o.charAt(0)==="#")){var p=o.indexOf(" "),c=p>=0?o.substring(0,p):o;c=c.toLowerCase();var g=p>=0?o.substring(p+1):"";if(g=g.trim(),c==="newmtl")r={name:g},s[g]=r;else if(c==="ka"||c==="kd"||c==="ks"||c==="ke"){var w=g.split(a,3);r[c]=[parseFloat(w[0]),parseFloat(w[1]),parseFloat(w[2])]}else r[c]=g}}var S=new Re.MaterialCreator(this.resourcePath||t,this.materialOptions);return S.setCrossOrigin(this.crossOrigin),S.setManager(this.manager),S.setMaterials(s),S}});Re.MaterialCreator=function(n,t){this.baseUrl=n||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:sn,this.wrap=this.options&&this.options.wrap?this.options.wrap:ut};Re.MaterialCreator.prototype={constructor:Re.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(n){return this.crossOrigin=n,this},setManager:function(n){this.manager=n},setMaterials:function(n){this.materialsInfo=this.convert(n),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(n){if(!this.options)return n;var t={};for(var e in n){var r=n[e],a={};t[e]=a;for(var s in r){var f=!0,o=r[s],p=s.toLowerCase();switch(p){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(o=[o[0]/255,o[1]/255,o[2]/255]),this.options&&this.options.ignoreZeroRGBs&&o[0]===0&&o[1]===0&&o[2]===0&&(f=!1);break}f&&(a[p]=o)}}return t},preload:function(){for(var n in this.materialsInfo)this.create(n)},getIndex:function(n){return this.nameLookup[n]},getAsArray:function(){var n=0;for(var t in this.materialsInfo)this.materialsArray[n]=this.create(t),this.nameLookup[t]=n,n++;return this.materialsArray},create:function(n){return this.materials[n]===void 0&&this.createMaterial_(n),this.materials[n]},createMaterial_:function(n){var t=this,e=this.materialsInfo[n],r={name:n,side:this.side};function a(c,g){return typeof g!="string"||g===""?"":/^https?:\/\//i.test(g)?g:c+g}function s(c,g){if(!r[c]){var w=t.getTextureParams(g,r),S=t.loadTexture(a(t.baseUrl,w.url));S.repeat.copy(w.scale),S.offset.copy(w.offset),S.wrapS=t.wrap,S.wrapT=t.wrap,r[c]=S}}for(var f in e){var o=e[f],p;if(o!=="")switch(f.toLowerCase()){case"kd":r.color=new he().fromArray(o);break;case"ks":r.specular=new he().fromArray(o);break;case"ke":r.emissive=new he().fromArray(o);break;case"map_kd":s("map",o);break;case"map_ks":s("specularMap",o);break;case"map_ke":s("emissiveMap",o);break;case"norm":s("normalMap",o);break;case"map_bump":case"bump":s("bumpMap",o);break;case"map_d":s("alphaMap",o),r.transparent=!0;break;case"ns":r.shininess=parseFloat(o);break;case"d":p=parseFloat(o),p<1&&(r.opacity=p,r.transparent=!0);break;case"tr":p=parseFloat(o),this.options&&this.options.invertTrProperty&&(p=1-p),p>0&&(r.opacity=1-p,r.transparent=!0);break}}return this.materials[n]=new Ft(r),this.materials[n]},getTextureParams:function(n,t){var e={scale:new de(1,1),offset:new de(0,0)},r=n.split(/\s+/),a;return a=r.indexOf("-bm"),a>=0&&(t.bumpScale=parseFloat(r[a+1]),r.splice(a,2)),a=r.indexOf("-s"),a>=0&&(e.scale.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),a=r.indexOf("-o"),a>=0&&(e.offset.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),e.url=r.join(" ").trim(),e},loadTexture:function(n,t,e,r,a){var s,f=this.manager!==void 0?this.manager:An,o=f.getHandler(n);return o===null&&(o=new on(f)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin),s=o.load(n,e,r,a),t!==void 0&&(s.mapping=t),s}};var lr=function(){function n(l){Se.call(this,l),this.dracoLoader=null,this.ddsLoader=null}n.prototype=Object.assign(Object.create(Se.prototype),{constructor:n,load:function(l,i,d,u){var _=this,y;this.resourcePath!==""?y=this.resourcePath:this.path!==""?y=this.path:y=Oe.extractUrlBase(l),_.manager.itemStart(l);var h=function(E){u?u(E):console.error(E),_.manager.itemError(l),_.manager.itemEnd(l)},m=new Qe(_.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),_.crossOrigin==="use-credentials"&&m.setWithCredentials(!0),m.load(l,function(E){try{_.parse(E,y,function(x){i(x),_.manager.itemEnd(l)},h)}catch(x){h(x)}},d,h)},setDRACOLoader:function(l){return this.dracoLoader=l,this},setDDSLoader:function(l){return this.ddsLoader=l,this},parse:function(l,i,d,u){var _,y={};if(typeof l=="string")_=l;else{var h=Oe.decodeText(new Uint8Array(l,0,4));if(h===f){try{y[e.KHR_BINARY_GLTF]=new c(l)}catch(O){u&&u(O);return}_=y[e.KHR_BINARY_GLTF].content}else _=Oe.decodeText(new Uint8Array(l))}var m=JSON.parse(_);if(m.asset===void 0||m.asset.version[0]<2){u&&u(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}if(m.extensionsUsed)for(var E=0;E<m.extensionsUsed.length;++E){var x=m.extensionsUsed[E],R=m.extensionsRequired||[];switch(x){case e.KHR_LIGHTS_PUNCTUAL:y[x]=new a(m);break;case e.KHR_MATERIALS_UNLIT:y[x]=new s;break;case e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:y[x]=new k;break;case e.KHR_DRACO_MESH_COMPRESSION:y[x]=new g(m,this.dracoLoader);break;case e.MSFT_TEXTURE_DDS:y[x]=new r(this.ddsLoader);break;case e.KHR_TEXTURE_TRANSFORM:y[x]=new w;break;case e.KHR_MESH_QUANTIZATION:y[x]=new C;break;default:R.indexOf(x)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+x+'".')}}var L=new V(m,y,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});L.parse(d,u)}});function t(){var l={};return{get:function(i){return l[i]},add:function(i,d){l[i]=d},remove:function(i){delete l[i]},removeAll:function(){l={}}}}var e={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(l){if(!l)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=e.MSFT_TEXTURE_DDS,this.ddsLoader=l}function a(l){this.name=e.KHR_LIGHTS_PUNCTUAL;var i=l.extensions&&l.extensions[e.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=i.lights||[]}a.prototype.loadLight=function(l){var i=this.lightDefs[l],d,u=new he(16777215);i.color!==void 0&&u.fromArray(i.color);var _=i.range!==void 0?i.range:0;switch(i.type){case"directional":d=new ln(u),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new Cn(u),d.distance=_;break;case"spot":d=new Ln(u),d.distance=_,i.spot=i.spot||{},i.spot.innerConeAngle=i.spot.innerConeAngle!==void 0?i.spot.innerConeAngle:0,i.spot.outerConeAngle=i.spot.outerConeAngle!==void 0?i.spot.outerConeAngle:Math.PI/4,d.angle=i.spot.outerConeAngle,d.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+i.type+'".')}return d.position.set(0,0,0),d.decay=2,i.intensity!==void 0&&(d.intensity=i.intensity),d.name=i.name||"light_"+l,Promise.resolve(d)};function s(){this.name=e.KHR_MATERIALS_UNLIT}s.prototype.getMaterialType=function(){return ze},s.prototype.extendParams=function(l,i,d){var u=[];l.color=new he(1,1,1),l.opacity=1;var _=i.pbrMetallicRoughness;if(_){if(Array.isArray(_.baseColorFactor)){var y=_.baseColorFactor;l.color.fromArray(y),l.opacity=y[3]}_.baseColorTexture!==void 0&&u.push(d.assignTexture(l,"map",_.baseColorTexture))}return Promise.all(u)};var f="glTF",o=12,p={JSON:1313821514,BIN:5130562};function c(l){this.name=e.KHR_BINARY_GLTF,this.content=null,this.body=null;var i=new DataView(l,0,o);if(this.header={magic:Oe.decodeText(new Uint8Array(l.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==f)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var d=new DataView(l,o),u=0;u<d.byteLength;){var _=d.getUint32(u,!0);u+=4;var y=d.getUint32(u,!0);if(u+=4,y===p.JSON){var h=new Uint8Array(l,o+u,_);this.content=Oe.decodeText(h)}else if(y===p.BIN){var m=o+u;this.body=l.slice(m,m+_)}u+=_}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function g(l,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=e.KHR_DRACO_MESH_COMPRESSION,this.json=l,this.dracoLoader=i,this.dracoLoader.preload()}g.prototype.decodePrimitive=function(l,i){var d=this.json,u=this.dracoLoader,_=l.extensions[this.name].bufferView,y=l.extensions[this.name].attributes,h={},m={},E={};for(var x in y){var R=G[x]||x.toLowerCase();h[R]=y[x]}for(x in l.attributes){var R=G[x]||x.toLowerCase();if(y[x]!==void 0){var L=d.accessors[l.attributes[x]],O=F[L.componentType];E[R]=O,m[R]=L.normalized===!0}}return i.getDependency("bufferView",_).then(function(I){return new Promise(function(D){u.decodeDracoFile(I,function(X){for(var W in X.attributes){var K=X.attributes[W],ee=m[W];ee!==void 0&&(K.normalized=ee)}D(X)},h,E)})})};function w(){this.name=e.KHR_TEXTURE_TRANSFORM}w.prototype.extendTexture=function(l,i){return l=l.clone(),i.offset!==void 0&&l.offset.fromArray(i.offset),i.rotation!==void 0&&(l.rotation=i.rotation),i.scale!==void 0&&l.repeat.fromArray(i.scale),i.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),l.needsUpdate=!0,l};function S(l){Xe.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var i=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),d=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),u=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),_=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),y=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),h={specular:{value:new he().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=h,this.onBeforeCompile=function(m){for(var E in h)m.uniforms[E]=h[E];m.fragmentShader=m.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),m.fragmentShader=m.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),m.fragmentShader=m.fragmentShader.replace("#include <roughnessmap_pars_fragment>",i),m.fragmentShader=m.fragmentShader.replace("#include <metalnessmap_pars_fragment>",d),m.fragmentShader=m.fragmentShader.replace("#include <roughnessmap_fragment>",u),m.fragmentShader=m.fragmentShader.replace("#include <metalnessmap_fragment>",_),m.fragmentShader=m.fragmentShader.replace("#include <lights_physical_fragment>",y)},Object.defineProperties(this,{specular:{get:function(){return h.specular.value},set:function(m){h.specular.value=m}},specularMap:{get:function(){return h.specularMap.value},set:function(m){h.specularMap.value=m}},glossiness:{get:function(){return h.glossiness.value},set:function(m){h.glossiness.value=m}},glossinessMap:{get:function(){return h.glossinessMap.value},set:function(m){h.glossinessMap.value=m,m?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(l)}S.prototype=Object.create(Xe.prototype),S.prototype.constructor=S,S.prototype.copy=function(l){return Xe.prototype.copy.call(this,l),this.specularMap=l.specularMap,this.specular.copy(l.specular),this.glossinessMap=l.glossinessMap,this.glossiness=l.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this};function k(){return{name:e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return S},extendParams:function(l,i,d){var u=i.extensions[this.name];l.color=new he(1,1,1),l.opacity=1;var _=[];if(Array.isArray(u.diffuseFactor)){var y=u.diffuseFactor;l.color.fromArray(y),l.opacity=y[3]}if(u.diffuseTexture!==void 0&&_.push(d.assignTexture(l,"map",u.diffuseTexture)),l.emissive=new he(0,0,0),l.glossiness=u.glossinessFactor!==void 0?u.glossinessFactor:1,l.specular=new he(1,1,1),Array.isArray(u.specularFactor)&&l.specular.fromArray(u.specularFactor),u.specularGlossinessTexture!==void 0){var h=u.specularGlossinessTexture;_.push(d.assignTexture(l,"glossinessMap",h)),_.push(d.assignTexture(l,"specularMap",h))}return Promise.all(_)},createMaterial:function(l){var i=new S(l);return i.fog=!0,i.color=l.color,i.map=l.map===void 0?null:l.map,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=l.aoMap===void 0?null:l.aoMap,i.aoMapIntensity=1,i.emissive=l.emissive,i.emissiveIntensity=1,i.emissiveMap=l.emissiveMap===void 0?null:l.emissiveMap,i.bumpMap=l.bumpMap===void 0?null:l.bumpMap,i.bumpScale=1,i.normalMap=l.normalMap===void 0?null:l.normalMap,i.normalMapType=On,l.normalScale&&(i.normalScale=l.normalScale),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=l.specularMap===void 0?null:l.specularMap,i.specular=l.specular,i.glossinessMap=l.glossinessMap===void 0?null:l.glossinessMap,i.glossiness=l.glossiness,i.alphaMap=null,i.envMap=l.envMap===void 0?null:l.envMap,i.envMapIntensity=1,i.refractionRatio=.98,i}}}function C(){this.name=e.KHR_MESH_QUANTIZATION}function A(l,i,d,u){Kt.call(this,l,i,d,u)}A.prototype=Object.create(Kt.prototype),A.prototype.constructor=A,A.prototype.copySampleValue_=function(l){for(var i=this.resultBuffer,d=this.sampleValues,u=this.valueSize,_=l*u*3+u,y=0;y!==u;y++)i[y]=d[_+y];return i},A.prototype.beforeStart_=A.prototype.copySampleValue_,A.prototype.afterEnd_=A.prototype.copySampleValue_,A.prototype.interpolate_=function(l,i,d,u){for(var _=this.resultBuffer,y=this.sampleValues,h=this.valueSize,m=h*2,E=h*3,x=u-i,R=(d-i)/x,L=R*R,O=L*R,I=l*E,D=I-E,X=-2*O+3*L,W=O-L,K=1-X,ee=W-L+R,ie=0;ie!==h;ie++){var we=y[D+ie+h],v=y[D+ie+m]*x,B=y[I+ie+h],j=y[I+ie]*x;_[ie]=K*we+ee*v+X*B+W*j}return _};var M={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},F={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},H={9728:Bn,9729:Gt,9984:Gn,9985:jn,9986:Vn,9987:jt},P={33071:zn,33648:Xn,10497:ut},N={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},G={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},$={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ae={CUBICSPLINE:void 0,LINEAR:Xt,STEP:Kn},U={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},z={"image/png":Yn,"image/jpeg":Vt};function q(l,i){return typeof l!="string"||l===""?"":(/^https?:\/\//i.test(i)&&/^\//.test(l)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(l)||/^data:.*,.*$/i.test(l)||/^blob:.*$/i.test(l)?l:i+l)}function se(l){return l.DefaultMaterial===void 0&&(l.DefaultMaterial=new Xe({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:sn})),l.DefaultMaterial}function oe(l,i,d){for(var u in d.extensions)l[u]===void 0&&(i.userData.gltfExtensions=i.userData.gltfExtensions||{},i.userData.gltfExtensions[u]=d.extensions[u])}function te(l,i){i.extras!==void 0&&(typeof i.extras=="object"?Object.assign(l.userData,i.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+i.extras))}function ce(l,i,d){for(var u=!1,_=!1,y=0,h=i.length;y<h;y++){var m=i[y];if(m.POSITION!==void 0&&(u=!0),m.NORMAL!==void 0&&(_=!0),u&&_)break}if(!u&&!_)return Promise.resolve(l);for(var E=[],x=[],y=0,h=i.length;y<h;y++){var m=i[y];if(u){var R=m.POSITION!==void 0?d.getDependency("accessor",m.POSITION):l.attributes.position;E.push(R)}if(_){var R=m.NORMAL!==void 0?d.getDependency("accessor",m.NORMAL):l.attributes.normal;x.push(R)}}return Promise.all([Promise.all(E),Promise.all(x)]).then(function(L){var O=L[0],I=L[1];return u&&(l.morphAttributes.position=O),_&&(l.morphAttributes.normal=I),l.morphTargetsRelative=!0,l})}function fe(l,i){if(l.updateMorphTargets(),i.weights!==void 0)for(var d=0,u=i.weights.length;d<u;d++)l.morphTargetInfluences[d]=i.weights[d];if(i.extras&&Array.isArray(i.extras.targetNames)){var _=i.extras.targetNames;if(l.morphTargetInfluences.length===_.length){l.morphTargetDictionary={};for(var d=0,u=_.length;d<u;d++)l.morphTargetDictionary[_[d]]=d}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function le(l){var i=l.extensions&&l.extensions[e.KHR_DRACO_MESH_COMPRESSION],d;return i?d="draco:"+i.bufferView+":"+i.indices+":"+ve(i.attributes):d=l.indices+":"+ve(l.attributes)+":"+l.mode,d}function ve(l){for(var i="",d=Object.keys(l).sort(),u=0,_=d.length;u<_;u++)i+=d[u]+":"+l[d[u]]+";";return i}function V(l,i,d){this.json=l||{},this.extensions=i||{},this.options=d||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new on(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new Qe(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}V.prototype.parse=function(l,i){var d=this,u=this.json,_=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(y){var h={scene:y[0][u.scene||0],scenes:y[0],animations:y[1],cameras:y[2],asset:u.asset,parser:d,userData:{}};oe(_,h,u),te(h,u),l(h)}).catch(i)},V.prototype.markDefs=function(){for(var l=this.json.nodes||[],i=this.json.skins||[],d=this.json.meshes||[],u={},_={},y=0,h=i.length;y<h;y++)for(var m=i[y].joints,E=0,x=m.length;E<x;E++)l[m[E]].isBone=!0;for(var R=0,L=l.length;R<L;R++){var O=l[R];O.mesh!==void 0&&(u[O.mesh]===void 0&&(u[O.mesh]=_[O.mesh]=0),u[O.mesh]++,O.skin!==void 0&&(d[O.mesh].isSkinnedMesh=!0))}this.json.meshReferences=u,this.json.meshUses=_},V.prototype.getDependency=function(l,i){var d=l+":"+i,u=this.cache.get(d);if(!u){switch(l){case"scene":u=this.loadScene(i);break;case"node":u=this.loadNode(i);break;case"mesh":u=this.loadMesh(i);break;case"accessor":u=this.loadAccessor(i);break;case"bufferView":u=this.loadBufferView(i);break;case"buffer":u=this.loadBuffer(i);break;case"material":u=this.loadMaterial(i);break;case"texture":u=this.loadTexture(i);break;case"skin":u=this.loadSkin(i);break;case"animation":u=this.loadAnimation(i);break;case"camera":u=this.loadCamera(i);break;case"light":u=this.extensions[e.KHR_LIGHTS_PUNCTUAL].loadLight(i);break;default:throw new Error("Unknown type: "+l)}this.cache.add(d,u)}return u},V.prototype.getDependencies=function(l){var i=this.cache.get(l);if(!i){var d=this,u=this.json[l+(l==="mesh"?"es":"s")]||[];i=Promise.all(u.map(function(_,y){return d.getDependency(l,y)})),this.cache.add(l,i)}return i},V.prototype.loadBuffer=function(l){var i=this.json.buffers[l],d=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&l===0)return Promise.resolve(this.extensions[e.KHR_BINARY_GLTF].body);var u=this.options;return new Promise(function(_,y){d.load(q(i.uri,u.path),_,void 0,function(){y(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})},V.prototype.loadBufferView=function(l){var i=this.json.bufferViews[l];return this.getDependency("buffer",i.buffer).then(function(d){var u=i.byteLength||0,_=i.byteOffset||0;return d.slice(_,_+u)})},V.prototype.loadAccessor=function(l){var i=this,d=this.json,u=this.json.accessors[l];if(u.bufferView===void 0&&u.sparse===void 0)return Promise.resolve(null);var _=[];return u.bufferView!==void 0?_.push(this.getDependency("bufferView",u.bufferView)):_.push(null),u.sparse!==void 0&&(_.push(this.getDependency("bufferView",u.sparse.indices.bufferView)),_.push(this.getDependency("bufferView",u.sparse.values.bufferView))),Promise.all(_).then(function(y){var h=y[0],m=N[u.type],E=F[u.componentType],x=E.BYTES_PER_ELEMENT,R=x*m,L=u.byteOffset||0,O=u.bufferView!==void 0?d.bufferViews[u.bufferView].byteStride:void 0,I=u.normalized===!0,D,X;if(O&&O!==R){var W=Math.floor(L/O),K="InterleavedBuffer:"+u.bufferView+":"+u.componentType+":"+W+":"+u.count,ee=i.cache.get(K);ee||(D=new E(h,W*O,u.count*O/x),ee=new Rn(D,O/x),i.cache.add(K,ee)),X=new Wn(ee,m,L%O/x,I)}else h===null?D=new E(u.count*m):D=new E(h,L,u.count*m),X=new He(D,m,I);if(u.sparse!==void 0){var ie=N.SCALAR,we=F[u.sparse.indices.componentType],v=u.sparse.indices.byteOffset||0,B=u.sparse.values.byteOffset||0,j=new we(y[1],v,u.sparse.count*ie),J=new E(y[2],B,u.sparse.count*m);h!==null&&(X=new He(X.array.slice(),X.itemSize,X.normalized));for(var Q=0,Fe=j.length;Q<Fe;Q++){var ue=j[Q];if(X.setX(ue,J[Q*m]),m>=2&&X.setY(ue,J[Q*m+1]),m>=3&&X.setZ(ue,J[Q*m+2]),m>=4&&X.setW(ue,J[Q*m+3]),m>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return X})},V.prototype.loadTexture=function(l){var i=this,d=this.json,u=this.options,_=this.textureLoader,y=window.URL||window.webkitURL,h=d.textures[l],m=h.extensions||{},E;m[e.MSFT_TEXTURE_DDS]?E=d.images[m[e.MSFT_TEXTURE_DDS].source]:E=d.images[h.source];var x=E.uri,R=!1;return E.bufferView!==void 0&&(x=i.getDependency("bufferView",E.bufferView).then(function(L){R=!0;var O=new Blob([L],{type:E.mimeType});return x=y.createObjectURL(O),x})),Promise.resolve(x).then(function(L){var O=u.manager.getHandler(L);return O||(O=m[e.MSFT_TEXTURE_DDS]?i.extensions[e.MSFT_TEXTURE_DDS].ddsLoader:_),new Promise(function(I,D){O.load(q(L,u.path),I,void 0,D)})}).then(function(L){R===!0&&y.revokeObjectURL(x),L.flipY=!1,h.name&&(L.name=h.name),E.mimeType in z&&(L.format=z[E.mimeType]);var O=d.samplers||{},I=O[h.sampler]||{};return L.magFilter=H[I.magFilter]||Gt,L.minFilter=H[I.minFilter]||jt,L.wrapS=P[I.wrapS]||ut,L.wrapT=P[I.wrapT]||ut,L})},V.prototype.assignTexture=function(l,i,d){var u=this;return this.getDependency("texture",d.index).then(function(_){if(!_.isCompressedTexture)switch(i){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":_.format=Vt;break}if(d.texCoord!==void 0&&d.texCoord!=0&&!(i==="aoMap"&&d.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+d.texCoord+" for texture "+i+" not yet supported."),u.extensions[e.KHR_TEXTURE_TRANSFORM]){var y=d.extensions!==void 0?d.extensions[e.KHR_TEXTURE_TRANSFORM]:void 0;y&&(_=u.extensions[e.KHR_TEXTURE_TRANSFORM].extendTexture(_,y))}l[i]=_})},V.prototype.assignFinalMaterial=function(l){var i=l.geometry,d=l.material,u=i.attributes.tangent!==void 0,_=i.attributes.color!==void 0,y=i.attributes.normal===void 0,h=l.isSkinnedMesh===!0,m=Object.keys(i.morphAttributes).length>0,E=m&&i.morphAttributes.normal!==void 0;if(l.isPoints){var x="PointsMaterial:"+d.uuid,R=this.cache.get(x);R||(R=new lt,ct.prototype.copy.call(R,d),R.color.copy(d.color),R.map=d.map,R.sizeAttenuation=!1,this.cache.add(x,R)),d=R}else if(l.isLine){var x="LineBasicMaterial:"+d.uuid,L=this.cache.get(x);L||(L=new ot,ct.prototype.copy.call(L,d),L.color.copy(d.color),this.cache.add(x,L)),d=L}if(u||_||y||h||m){var x="ClonedMaterial:"+d.uuid+":";d.isGLTFSpecularGlossinessMaterial&&(x+="specular-glossiness:"),h&&(x+="skinning:"),u&&(x+="vertex-tangents:"),_&&(x+="vertex-colors:"),y&&(x+="flat-shading:"),m&&(x+="morph-targets:"),E&&(x+="morph-normals:");var O=this.cache.get(x);O||(O=d.clone(),h&&(O.skinning=!0),u&&(O.vertexTangents=!0),_&&(O.vertexColors=!0),y&&(O.flatShading=!0),m&&(O.morphTargets=!0),E&&(O.morphNormals=!0),this.cache.add(x,O)),d=O}d.aoMap&&i.attributes.uv2===void 0&&i.attributes.uv!==void 0&&i.setAttribute("uv2",new He(i.attributes.uv.array,2)),d.normalScale&&!u&&(d.normalScale.y=-d.normalScale.y),l.material=d},V.prototype.loadMaterial=function(l){var i=this,d=this.json,u=this.extensions,_=d.materials[l],y,h={},m=_.extensions||{},E=[];if(m[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var x=u[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];y=x.getMaterialType(),E.push(x.extendParams(h,_,i))}else if(m[e.KHR_MATERIALS_UNLIT]){var R=u[e.KHR_MATERIALS_UNLIT];y=R.getMaterialType(),E.push(R.extendParams(h,_,i))}else{y=Xe;var L=_.pbrMetallicRoughness||{};if(h.color=new he(1,1,1),h.opacity=1,Array.isArray(L.baseColorFactor)){var O=L.baseColorFactor;h.color.fromArray(O),h.opacity=O[3]}L.baseColorTexture!==void 0&&E.push(i.assignTexture(h,"map",L.baseColorTexture)),h.metalness=L.metallicFactor!==void 0?L.metallicFactor:1,h.roughness=L.roughnessFactor!==void 0?L.roughnessFactor:1,L.metallicRoughnessTexture!==void 0&&(E.push(i.assignTexture(h,"metalnessMap",L.metallicRoughnessTexture)),E.push(i.assignTexture(h,"roughnessMap",L.metallicRoughnessTexture)))}_.doubleSided===!0&&(h.side=Mn);var I=_.alphaMode||U.OPAQUE;return I===U.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,I===U.MASK&&(h.alphaTest=_.alphaCutoff!==void 0?_.alphaCutoff:.5)),_.normalTexture!==void 0&&y!==ze&&(E.push(i.assignTexture(h,"normalMap",_.normalTexture)),h.normalScale=new de(1,1),_.normalTexture.scale!==void 0&&h.normalScale.set(_.normalTexture.scale,_.normalTexture.scale)),_.occlusionTexture!==void 0&&y!==ze&&(E.push(i.assignTexture(h,"aoMap",_.occlusionTexture)),_.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=_.occlusionTexture.strength)),_.emissiveFactor!==void 0&&y!==ze&&(h.emissive=new he().fromArray(_.emissiveFactor)),_.emissiveTexture!==void 0&&y!==ze&&E.push(i.assignTexture(h,"emissiveMap",_.emissiveTexture)),Promise.all(E).then(function(){var D;return y===S?D=u[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(h):D=new y(h),_.name&&(D.name=_.name),D.map&&(D.map.encoding=zt),D.emissiveMap&&(D.emissiveMap.encoding=zt),te(D,_),_.extensions&&oe(u,D,_),D})};function ke(l,i,d){var u=i.attributes,_=new er;if(u.POSITION!==void 0){var y=d.json.accessors[u.POSITION],h=y.min,m=y.max;if(h!==void 0&&m!==void 0)_.set(new ne(h[0],h[1],h[2]),new ne(m[0],m[1],m[2]));else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;var E=i.targets;if(E!==void 0)for(var x=new ne,R=0,L=E.length;R<L;R++){var O=E[R];if(O.POSITION!==void 0){var y=d.json.accessors[O.POSITION],h=y.min,m=y.max;h!==void 0&&m!==void 0?(x.setX(Math.max(Math.abs(h[0]),Math.abs(m[0]))),x.setY(Math.max(Math.abs(h[1]),Math.abs(m[1]))),x.setZ(Math.max(Math.abs(h[2]),Math.abs(m[2]))),_.expandByVector(x)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}l.boundingBox=_;var I=new tr;_.getCenter(I.center),I.radius=_.min.distanceTo(_.max)/2,l.boundingSphere=I}function Y(l,i,d){var u=i.attributes,_=[];function y(x,R){return d.getDependency("accessor",x).then(function(L){l.setAttribute(R,L)})}for(var h in u){var m=G[h]||h.toLowerCase();m in l.attributes||_.push(y(u[h],m))}if(i.indices!==void 0&&!l.index){var E=d.getDependency("accessor",i.indices).then(function(x){l.setIndex(x)});_.push(E)}return te(l,i),ke(l,i,d),Promise.all(_).then(function(){return i.targets!==void 0?ce(l,i.targets,d):l})}function ye(l,i){var d=l.getIndex();if(d===null){var u=[],_=l.getAttribute("position");if(_!==void 0){for(var y=0;y<_.count;y++)u.push(y);l.setIndex(u),d=l.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),l}var h=d.count-2,m=[];if(i===Yt)for(var y=1;y<=h;y++)m.push(d.getX(0)),m.push(d.getX(y)),m.push(d.getX(y+1));else for(var y=0;y<h;y++)y%2===0?(m.push(d.getX(y)),m.push(d.getX(y+1)),m.push(d.getX(y+2))):(m.push(d.getX(y+2)),m.push(d.getX(y+1)),m.push(d.getX(y)));m.length/3!==h&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var E=l.clone();return E.setIndex(m),E}return V.prototype.loadGeometries=function(l){var i=this,d=this.extensions,u=this.primitiveCache;function _(O){return d[e.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(O,i).then(function(I){return Y(I,O,i)})}for(var y=[],h=0,m=l.length;h<m;h++){var E=l[h],x=le(E),R=u[x];if(R)y.push(R.promise);else{var L;E.extensions&&E.extensions[e.KHR_DRACO_MESH_COMPRESSION]?L=_(E):L=Y(new dt,E,i),u[x]={primitive:E,promise:L},y.push(L)}}return Promise.all(y)},V.prototype.loadMesh=function(l){for(var i=this,d=this.json,u=d.meshes[l],_=u.primitives,y=[],h=0,m=_.length;h<m;h++){var E=_[h].material===void 0?se(this.cache):this.getDependency("material",_[h].material);y.push(E)}return y.push(i.loadGeometries(_)),Promise.all(y).then(function(x){for(var R=x.slice(0,x.length-1),L=x[x.length-1],O=[],I=0,D=L.length;I<D;I++){var X=L[I],W=_[I],K,ee=R[I];if(W.mode===M.TRIANGLES||W.mode===M.TRIANGLE_STRIP||W.mode===M.TRIANGLE_FAN||W.mode===void 0)K=u.isSkinnedMesh===!0?new kn(X,ee):new ft(X,ee),K.isSkinnedMesh===!0&&!K.geometry.attributes.skinWeight.normalized&&K.normalizeSkinWeights(),W.mode===M.TRIANGLE_STRIP?K.geometry=ye(K.geometry,$n):W.mode===M.TRIANGLE_FAN&&(K.geometry=ye(K.geometry,Yt));else if(W.mode===M.LINES)K=new yt(X,ee);else if(W.mode===M.LINE_STRIP)K=new Fn(X,ee);else if(W.mode===M.LINE_LOOP)K=new Pn(X,ee);else if(W.mode===M.POINTS)K=new wt(X,ee);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+W.mode);Object.keys(K.geometry.morphAttributes).length>0&&fe(K,u),K.name=u.name||"mesh_"+l,L.length>1&&(K.name+="_"+I),te(K,u),i.assignFinalMaterial(K),O.push(K)}if(O.length===1)return O[0];for(var ie=new st,I=0,D=O.length;I<D;I++)ie.add(O[I]);return ie})},V.prototype.loadCamera=function(l){var i,d=this.json.cameras[l],u=d[d.type];if(!u){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return d.type==="perspective"?i=new un(Nn.radToDeg(u.yfov),u.aspectRatio||1,u.znear||1,u.zfar||2e6):d.type==="orthographic"&&(i=new In(u.xmag/-2,u.xmag/2,u.ymag/2,u.ymag/-2,u.znear,u.zfar)),d.name&&(i.name=d.name),te(i,d),Promise.resolve(i)},V.prototype.loadSkin=function(l){var i=this.json.skins[l],d={joints:i.joints};return i.inverseBindMatrices===void 0?Promise.resolve(d):this.getDependency("accessor",i.inverseBindMatrices).then(function(u){return d.inverseBindMatrices=u,d})},V.prototype.loadAnimation=function(l){for(var i=this.json,d=i.animations[l],u=[],_=[],y=[],h=[],m=[],E=0,x=d.channels.length;E<x;E++){var R=d.channels[E],L=d.samplers[R.sampler],O=R.target,I=O.node!==void 0?O.node:O.id,D=d.parameters!==void 0?d.parameters[L.input]:L.input,X=d.parameters!==void 0?d.parameters[L.output]:L.output;u.push(this.getDependency("node",I)),_.push(this.getDependency("accessor",D)),y.push(this.getDependency("accessor",X)),h.push(L),m.push(O)}return Promise.all([Promise.all(u),Promise.all(_),Promise.all(y),Promise.all(h),Promise.all(m)]).then(function(W){for(var K=W[0],ee=W[1],ie=W[2],we=W[3],v=W[4],B=[],j=0,J=K.length;j<J;j++){var Q=K[j],Fe=ee[j],ue=ie[j],mt=we[j],vt=v[j];if(Q!==void 0){Q.updateMatrix(),Q.matrixAutoUpdate=!0;var nt;switch($[vt.path]){case $.weights:nt=Qn;break;case $.rotation:nt=Jn;break;case $.position:case $.scale:default:nt=Zn;break}var yn=Q.name?Q.name:Q.uuid,wn=mt.interpolation!==void 0?ae[mt.interpolation]:Xt,rt=[];$[vt.path]===$.weights?Q.traverse(function(Ve){Ve.isMesh===!0&&Ve.morphTargetInfluences&&rt.push(Ve.name?Ve.name:Ve.uuid)}):rt.push(yn);var ge=ue.array;if(ue.normalized){var je;if(ge.constructor===Int8Array)je=1/127;else if(ge.constructor===Uint8Array)je=1/255;else if(ge.constructor==Int16Array)je=1/32767;else if(ge.constructor===Uint16Array)je=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var Ht=new Float32Array(ge.length),Ee=0,_t=ge.length;Ee<_t;Ee++)Ht[Ee]=ge[Ee]*je;ge=Ht}for(var Ee=0,_t=rt.length;Ee<_t;Ee++){var gt=new nt(rt[Ee]+"."+$[vt.path],Fe.array,ge,wn);mt.interpolation==="CUBICSPLINE"&&(gt.createInterpolant=function(xn){return new A(this.times,this.values,this.getValueSize()/3,xn)},gt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),B.push(gt)}}}var En=d.name?d.name:"animation_"+l;return new Dn(En,void 0,B)})},V.prototype.loadNode=function(l){var i=this.json,d=this.extensions,u=this,_=i.meshReferences,y=i.meshUses,h=i.nodes[l];return function(){var m=[];return h.mesh!==void 0&&m.push(u.getDependency("mesh",h.mesh).then(function(E){var x;if(_[h.mesh]>1){var R=y[h.mesh]++;x=E.clone(),x.name+="_instance_"+R}else x=E;return h.weights!==void 0&&x.traverse(function(L){if(L.isMesh)for(var O=0,I=h.weights.length;O<I;O++)L.morphTargetInfluences[O]=h.weights[O]}),x})),h.camera!==void 0&&m.push(u.getDependency("camera",h.camera)),h.extensions&&h.extensions[e.KHR_LIGHTS_PUNCTUAL]&&h.extensions[e.KHR_LIGHTS_PUNCTUAL].light!==void 0&&m.push(u.getDependency("light",h.extensions[e.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(m)}().then(function(m){var E;if(h.isBone===!0?E=new Hn:m.length>1?E=new st:m.length===1?E=m[0]:E=new kt,E!==m[0])for(var x=0,R=m.length;x<R;x++)E.add(m[x]);if(h.name&&(E.userData.name=h.name,E.name=Un.sanitizeNodeName(h.name)),te(E,h),h.extensions&&oe(d,E,h),h.matrix!==void 0){var L=new Je;L.fromArray(h.matrix),E.applyMatrix4(L)}else h.translation!==void 0&&E.position.fromArray(h.translation),h.rotation!==void 0&&E.quaternion.fromArray(h.rotation),h.scale!==void 0&&E.scale.fromArray(h.scale);return E})},V.prototype.loadScene=function(){function l(i,d,u,_){var y=u.nodes[i];return _.getDependency("node",i).then(function(h){if(y.skin===void 0)return h;var m;return _.getDependency("skin",y.skin).then(function(E){m=E;for(var x=[],R=0,L=m.joints.length;R<L;R++)x.push(_.getDependency("node",m.joints[R]));return Promise.all(x)}).then(function(E){return h.traverse(function(x){if(x.isMesh){for(var R=[],L=[],O=0,I=E.length;O<I;O++){var D=E[O];if(D){R.push(D);var X=new Je;m.inverseBindMatrices!==void 0&&X.fromArray(m.inverseBindMatrices.array,O*16),L.push(X)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',m.joints[O])}x.bind(new qn(R,L),x.matrixWorld)}}),h})}).then(function(h){d.add(h);var m=[];if(y.children)for(var E=y.children,x=0,R=E.length;x<R;x++){var L=E[x];m.push(l(L,h,u,_))}return Promise.all(m)})}return function(d){var u=this.json,_=this.extensions,y=this.json.scenes[d],h=this,m=new st;y.name&&(m.name=y.name),te(m,y),y.extensions&&oe(_,m,y);for(var E=y.nodes||[],x=[],R=0,L=E.length;R<L;R++)x.push(l(E[R],m,u,h));return Promise.all(x).then(function(){return m})}}(),n}();new or;new Re;new lr;var Tt=function(n){Se.call(this,n)};Tt.prototype=Object.assign(Object.create(Se.prototype),{constructor:Tt,load:function(n,t,e,r){var a=this,s=new Qe(a.manager);s.setPath(a.path),s.setResponseType("arraybuffer"),s.load(n,function(f){try{t(a.parse(f))}catch(o){r&&r(o)}},e,r)},parse:function(n){function t(p){var c,g,w,S;if(S=new DataView(p),g=32/8*3+32/8*3*3+16/8,w=S.getUint32(80,!0),c=80+32/8+w*g,c===S.byteLength)return!0;for(var k=[115,111,108,105,100],C=0;C<5;C++)if(e(k,S,C))return!1;return!0}function e(p,c,g){for(var w=0,S=p.length;w<S;w++)if(p[w]!==c.getUint8(g+w,!1))return!1;return!0}function r(p){for(var c=new DataView(p),g=c.getUint32(80,!0),w,S,k,C=!1,A,M,F,H,P,N=0;N<80-10;N++)c.getUint32(N,!1)==1129270351&&c.getUint8(N+4)==82&&c.getUint8(N+5)==61&&(C=!0,A=new Float32Array(g*3*3),M=c.getUint8(N+6)/255,F=c.getUint8(N+7)/255,H=c.getUint8(N+8)/255,P=c.getUint8(N+9)/255);for(var G=84,$=12*4+2,ae=new dt,U=new Float32Array(g*3*3),z=new Float32Array(g*3*3),q=0;q<g;q++){var se=G+q*$,oe=c.getFloat32(se,!0),te=c.getFloat32(se+4,!0),ce=c.getFloat32(se+8,!0);if(C){var fe=c.getUint16(se+48,!0);fe&32768?(w=M,S=F,k=H):(w=(fe&31)/31,S=(fe>>5&31)/31,k=(fe>>10&31)/31)}for(var le=1;le<=3;le++){var ve=se+le*12,V=q*3*3+(le-1)*3;U[V]=c.getFloat32(ve,!0),U[V+1]=c.getFloat32(ve+4,!0),U[V+2]=c.getFloat32(ve+8,!0),z[V]=oe,z[V+1]=te,z[V+2]=ce,C&&(A[V]=w,A[V+1]=S,A[V+2]=k)}}return ae.setAttribute("position",new He(U,3)),ae.setAttribute("normal",new He(z,3)),C&&(ae.setAttribute("color",new He(A,3)),ae.hasColors=!0,ae.alpha=P),ae}function a(p){for(var c=new dt,g=/solid([\s\S]*?)endsolid/g,w=/facet([\s\S]*?)endfacet/g,S=0,k=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,C=new RegExp("vertex"+k+k+k,"g"),A=new RegExp("normal"+k+k+k,"g"),M=[],F=[],H=new ne,P,N=0,G=0,$=0;(P=g.exec(p))!==null;){G=$;for(var ae=P[0];(P=w.exec(ae))!==null;){for(var U=0,z=0,q=P[0];(P=A.exec(q))!==null;)H.x=parseFloat(P[1]),H.y=parseFloat(P[2]),H.z=parseFloat(P[3]),z++;for(;(P=C.exec(q))!==null;)M.push(parseFloat(P[1]),parseFloat(P[2]),parseFloat(P[3])),F.push(H.x,H.y,H.z),U++,$++;z!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+S),U!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+S),S++}var se=G,oe=$-G;c.addGroup(se,oe,N),N++}return c.setAttribute("position",new Ie(M,3)),c.setAttribute("normal",new Ie(F,3)),c}function s(p){return typeof p!="string"?Oe.decodeText(new Uint8Array(p)):p}function f(p){if(typeof p=="string"){for(var c=new Uint8Array(p.length),g=0;g<p.length;g++)c[g]=p.charCodeAt(g)&255;return c.buffer||c}else return p}var o=f(n);return t(o)?r(o):a(s(n))}});function ur(n){if(n&&!(typeof window>"u")){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=n,document.head.appendChild(t),n}}function De(n,t){var e=n.__state.conversionName.toString(),r=Math.round(n.r),a=Math.round(n.g),s=Math.round(n.b),f=n.a,o=Math.round(n.h),p=n.s.toFixed(1),c=n.v.toFixed(1);if(t||e==="THREE_CHAR_HEX"||e==="SIX_CHAR_HEX"){for(var g=n.hex.toString(16);g.length<6;)g="0"+g;return"#"+g}else{if(e==="CSS_RGB")return"rgb("+r+","+a+","+s+")";if(e==="CSS_RGBA")return"rgba("+r+","+a+","+s+","+f+")";if(e==="HEX")return"0x"+n.hex.toString(16);if(e==="RGB_ARRAY")return"["+r+","+a+","+s+"]";if(e==="RGBA_ARRAY")return"["+r+","+a+","+s+","+f+"]";if(e==="RGB_OBJ")return"{r:"+r+",g:"+a+",b:"+s+"}";if(e==="RGBA_OBJ")return"{r:"+r+",g:"+a+",b:"+s+",a:"+f+"}";if(e==="HSV_OBJ")return"{h:"+o+",s:"+p+",v:"+c+"}";if(e==="HSVA_OBJ")return"{h:"+o+",s:"+p+",v:"+c+",a:"+f+"}"}return"unknown format"}var Wt=Array.prototype.forEach,Ke=Array.prototype.slice,T={BREAK:{},extend:function(t){return this.each(Ke.call(arguments,1),function(e){var r=this.isObject(e)?Object.keys(e):[];r.forEach((function(a){this.isUndefined(e[a])||(t[a]=e[a])}).bind(this))},this),t},defaults:function(t){return this.each(Ke.call(arguments,1),function(e){var r=this.isObject(e)?Object.keys(e):[];r.forEach((function(a){this.isUndefined(t[a])&&(t[a]=e[a])}).bind(this))},this),t},compose:function(){var t=Ke.call(arguments);return function(){for(var e=Ke.call(arguments),r=t.length-1;r>=0;r--)e=[t[r].apply(this,e)];return e[0]}},each:function(t,e,r){if(t){if(Wt&&t.forEach&&t.forEach===Wt)t.forEach(e,r);else if(t.length===t.length+0){var a=void 0,s=void 0;for(a=0,s=t.length;a<s;a++)if(a in t&&e.call(r,t[a],a)===this.BREAK)return}else for(var f in t)if(e.call(r,t[f],f)===this.BREAK)return}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,r){var a=void 0;return function(){var s=this,f=arguments;function o(){a=null,r||t.apply(s,f)}var p=r||!a;clearTimeout(a),a=setTimeout(o,e),p&&t.apply(s,f)}},toArray:function(t){return t.toArray?t.toArray():Ke.call(t)},isUndefined:function(t){return t===void 0},isNull:function(t){return t===null},isNaN:function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(n){return isNaN(n)}),isArray:Array.isArray||function(n){return n.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return Object.prototype.toString.call(t)==="[object Function]"}},dr=[{litmus:T.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:De},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:De},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:De},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:De}}},{litmus:T.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:T.isArray,conversions:{RGB_ARRAY:{read:function(t){return t.length!==3?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return t.length!==4?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:T.isObject,conversions:{RGBA_OBJ:{read:function(t){return T.isNumber(t.r)&&T.isNumber(t.g)&&T.isNumber(t.b)&&T.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return T.isNumber(t.r)&&T.isNumber(t.g)&&T.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return T.isNumber(t.h)&&T.isNumber(t.s)&&T.isNumber(t.v)&&T.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return T.isNumber(t.h)&&T.isNumber(t.s)&&T.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],Ye=void 0,at=void 0,St=function(){at=!1;var t=arguments.length>1?T.toArray(arguments):arguments[0];return T.each(dr,function(e){if(e.litmus(t))return T.each(e.conversions,function(r,a){if(Ye=r.read(t),at===!1&&Ye!==!1)return at=Ye,Ye.conversionName=a,Ye.conversion=r,T.BREAK}),T.BREAK}),at},$t=void 0,ht={hsv_to_rgb:function(t,e,r){var a=Math.floor(t/60)%6,s=t/60-Math.floor(t/60),f=r*(1-e),o=r*(1-s*e),p=r*(1-(1-s)*e),c=[[r,p,f],[o,r,f],[f,r,p],[f,o,r],[p,f,r],[r,f,o]][a];return{r:c[0]*255,g:c[1]*255,b:c[2]*255}},rgb_to_hsv:function(t,e,r){var a=Math.min(t,e,r),s=Math.max(t,e,r),f=s-a,o=void 0,p=void 0;if(s!==0)p=f/s;else return{h:NaN,s:0,v:0};return t===s?o=(e-r)/f:e===s?o=2+(r-t)/f:o=4+(t-e)/f,o/=6,o<0&&(o+=1),{h:o*360,s:p,v:s/255}},rgb_to_hex:function(t,e,r){var a=this.hex_with_component(0,2,t);return a=this.hex_with_component(a,1,e),a=this.hex_with_component(a,0,r),a},component_from_hex:function(t,e){return t>>e*8&255},hex_with_component:function(t,e,r){return r<<($t=e*8)|t&~(255<<$t)}},cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pe=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},me=function(){function n(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),Ae=function n(t,e,r){t===null&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(a===void 0){var s=Object.getPrototypeOf(t);return s===null?void 0:n(s,e,r)}else{if("value"in a)return a.value;var f=a.get;return f===void 0?void 0:f.call(r)}},Le=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},Ce=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n},re=function(){function n(){if(pe(this,n),this.__state=St.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return me(n,[{key:"toString",value:function(){return De(this)}},{key:"toHexString",value:function(){return De(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),n}();function Pt(n,t,e){Object.defineProperty(n,t,{get:function(){return this.__state.space==="RGB"?this.__state[t]:(re.recalculateRGB(this,t,e),this.__state[t])},set:function(a){this.__state.space!=="RGB"&&(re.recalculateRGB(this,t,e),this.__state.space="RGB"),this.__state[t]=a}})}function Nt(n,t){Object.defineProperty(n,t,{get:function(){return this.__state.space==="HSV"?this.__state[t]:(re.recalculateHSV(this),this.__state[t])},set:function(r){this.__state.space!=="HSV"&&(re.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=r}})}re.recalculateRGB=function(n,t,e){if(n.__state.space==="HEX")n.__state[t]=ht.component_from_hex(n.__state.hex,e);else if(n.__state.space==="HSV")T.extend(n.__state,ht.hsv_to_rgb(n.__state.h,n.__state.s,n.__state.v));else throw new Error("Corrupted color state")};re.recalculateHSV=function(n){var t=ht.rgb_to_hsv(n.r,n.g,n.b);T.extend(n.__state,{s:t.s,v:t.v}),T.isNaN(t.h)?T.isUndefined(n.__state.h)&&(n.__state.h=0):n.__state.h=t.h};re.COMPONENTS=["r","g","b","h","s","v","hex","a"];Pt(re.prototype,"r",2);Pt(re.prototype,"g",1);Pt(re.prototype,"b",0);Nt(re.prototype,"h");Nt(re.prototype,"s");Nt(re.prototype,"v");Object.defineProperty(re.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}});Object.defineProperty(re.prototype,"hex",{get:function(){return!this.__state.space!=="HEX"&&(this.__state.hex=ht.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var Me=function(){function n(t,e){pe(this,n),this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0}return me(n,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),n}(),fr={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},fn={};T.each(fr,function(n,t){T.each(n,function(e){fn[e]=t})});var hr=/(\d+(\.\d+)?)px/;function _e(n){if(n==="0"||T.isUndefined(n))return 0;var t=n.match(hr);return T.isNull(t)?0:parseFloat(t[1])}var b={makeSelectable:function(t,e){t===void 0||t.style===void 0||(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,r){var a=r,s=e;T.isUndefined(s)&&(s=!0),T.isUndefined(a)&&(a=!0),t.style.position="absolute",s&&(t.style.left=0,t.style.right=0),a&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,r,a){var s=r||{},f=fn[e];if(!f)throw new Error("Event type "+e+" not supported.");var o=document.createEvent(f);switch(f){case"MouseEvents":{var p=s.x||s.clientX||0,c=s.y||s.clientY||0;o.initMouseEvent(e,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,p,c,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var g=o.initKeyboardEvent||o.initKeyEvent;T.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),g(e,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break}default:{o.initEvent(e,s.bubbles||!1,s.cancelable||!0);break}}T.defaults(o,a),t.dispatchEvent(o)},bind:function(t,e,r,a){var s=a||!1;return t.addEventListener?t.addEventListener(e,r,s):t.attachEvent&&t.attachEvent("on"+e,r),b},unbind:function(t,e,r,a){var s=a||!1;return t.removeEventListener?t.removeEventListener(e,r,s):t.detachEvent&&t.detachEvent("on"+e,r),b},addClass:function(t,e){if(t.className===void 0)t.className=e;else if(t.className!==e){var r=t.className.split(/ +/);r.indexOf(e)===-1&&(r.push(e),t.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return b},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var r=t.className.split(/ +/),a=r.indexOf(e);a!==-1&&(r.splice(a,1),t.className=r.join(" "))}else t.className=void 0;return b},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return _e(e["border-left-width"])+_e(e["border-right-width"])+_e(e["padding-left"])+_e(e["padding-right"])+_e(e.width)},getHeight:function(t){var e=getComputedStyle(t);return _e(e["border-top-width"])+_e(e["border-bottom-width"])+_e(e["padding-top"])+_e(e["padding-bottom"])+_e(e.height)},getOffset:function(t){var e=t,r={left:0,top:0};if(e.offsetParent)do r.left+=e.offsetLeft,r.top+=e.offsetTop,e=e.offsetParent;while(e);return r},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},hn=function(n){Le(t,n);function t(e,r){pe(this,t);var a=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),s=a;a.__prev=a.getValue(),a.__checkbox=document.createElement("input"),a.__checkbox.setAttribute("type","checkbox");function f(){s.setValue(!s.__prev)}return b.bind(a.__checkbox,"change",f,!1),a.domElement.appendChild(a.__checkbox),a.updateDisplay(),a}return me(t,[{key:"setValue",value:function(r){var a=Ae(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,r);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),a}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Ae(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Me),pr=function(n){Le(t,n);function t(e,r,a){pe(this,t);var s=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),f=a,o=s;if(s.__select=document.createElement("select"),T.isArray(f)){var p={};T.each(f,function(c){p[c]=c}),f=p}return T.each(f,function(c,g){var w=document.createElement("option");w.innerHTML=g,w.setAttribute("value",c),o.__select.appendChild(w)}),s.updateDisplay(),b.bind(s.__select,"change",function(){var c=this.options[this.selectedIndex].value;o.setValue(c)}),s.domElement.appendChild(s.__select),s}return me(t,[{key:"setValue",value:function(r){var a=Ae(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,r);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),a}},{key:"updateDisplay",value:function(){return b.isActive(this.__select)?this:(this.__select.value=this.getValue(),Ae(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(Me),mr=function(n){Le(t,n);function t(e,r){pe(this,t);var a=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),s=a;function f(){s.setValue(s.__input.value)}function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__input=document.createElement("input"),a.__input.setAttribute("type","text"),b.bind(a.__input,"keyup",f),b.bind(a.__input,"change",f),b.bind(a.__input,"blur",o),b.bind(a.__input,"keydown",function(p){p.keyCode===13&&this.blur()}),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return me(t,[{key:"updateDisplay",value:function(){return b.isActive(this.__input)||(this.__input.value=this.getValue()),Ae(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Me);function Zt(n){var t=n.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var pn=function(n){Le(t,n);function t(e,r,a){pe(this,t);var s=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),f=a||{};return s.__min=f.min,s.__max=f.max,s.__step=f.step,T.isUndefined(s.__step)?s.initialValue===0?s.__impliedStep=1:s.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__impliedStep=s.__step,s.__precision=Zt(s.__impliedStep),s}return me(t,[{key:"setValue",value:function(r){var a=r;return this.__min!==void 0&&a<this.__min?a=this.__min:this.__max!==void 0&&a>this.__max&&(a=this.__max),this.__step!==void 0&&a%this.__step!==0&&(a=Math.round(a/this.__step)*this.__step),Ae(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,a)}},{key:"min",value:function(r){return this.__min=r,this}},{key:"max",value:function(r){return this.__max=r,this}},{key:"step",value:function(r){return this.__step=r,this.__impliedStep=r,this.__precision=Zt(r),this}}]),t}(Me);function vr(n,t){var e=Math.pow(10,t);return Math.round(n*e)/e}var pt=function(n){Le(t,n);function t(e,r,a){pe(this,t);var s=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a));s.__truncationSuspended=!1;var f=s,o=void 0;function p(){var C=parseFloat(f.__input.value);T.isNaN(C)||f.setValue(C)}function c(){f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}function g(){c()}function w(C){var A=o-C.clientY;f.setValue(f.getValue()+A*f.__impliedStep),o=C.clientY}function S(){b.unbind(window,"mousemove",w),b.unbind(window,"mouseup",S),c()}function k(C){b.bind(window,"mousemove",w),b.bind(window,"mouseup",S),o=C.clientY}return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),b.bind(s.__input,"change",p),b.bind(s.__input,"blur",g),b.bind(s.__input,"mousedown",k),b.bind(s.__input,"keydown",function(C){C.keyCode===13&&(f.__truncationSuspended=!0,this.blur(),f.__truncationSuspended=!1,c())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return me(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():vr(this.getValue(),this.__precision),Ae(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(pn);function Jt(n,t,e,r,a){return r+(a-r)*((n-t)/(e-t))}var At=function(n){Le(t,n);function t(e,r,a,s,f){pe(this,t);var o=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,{min:a,max:s,step:f})),p=o;o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),b.bind(o.__background,"mousedown",c),b.bind(o.__background,"touchstart",S),b.addClass(o.__background,"slider"),b.addClass(o.__foreground,"slider-fg");function c(A){document.activeElement.blur(),b.bind(window,"mousemove",g),b.bind(window,"mouseup",w),g(A)}function g(A){A.preventDefault();var M=p.__background.getBoundingClientRect();return p.setValue(Jt(A.clientX,M.left,M.right,p.__min,p.__max)),!1}function w(){b.unbind(window,"mousemove",g),b.unbind(window,"mouseup",w),p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())}function S(A){A.touches.length===1&&(b.bind(window,"touchmove",k),b.bind(window,"touchend",C),k(A))}function k(A){var M=A.touches[0].clientX,F=p.__background.getBoundingClientRect();p.setValue(Jt(M,F.left,F.right,p.__min,p.__max))}function C(){b.unbind(window,"touchmove",k),b.unbind(window,"touchend",C),p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())}return o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return me(t,[{key:"updateDisplay",value:function(){var r=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=r*100+"%",Ae(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(pn),mn=function(n){Le(t,n);function t(e,r,a){pe(this,t);var s=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),f=s;return s.__button=document.createElement("div"),s.__button.innerHTML=a===void 0?"Fire":a,b.bind(s.__button,"click",function(o){return o.preventDefault(),f.fire(),!1}),b.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return me(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(Me),Lt=function(n){Le(t,n);function t(e,r){pe(this,t);var a=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));a.__color=new re(a.getValue()),a.__temp=new re(0);var s=a;a.domElement=document.createElement("div"),b.makeSelectable(a.domElement,!1),a.__selector=document.createElement("div"),a.__selector.className="selector",a.__saturation_field=document.createElement("div"),a.__saturation_field.className="saturation-field",a.__field_knob=document.createElement("div"),a.__field_knob.className="field-knob",a.__field_knob_border="2px solid ",a.__hue_knob=document.createElement("div"),a.__hue_knob.className="hue-knob",a.__hue_field=document.createElement("div"),a.__hue_field.className="hue-field",a.__input=document.createElement("input"),a.__input.type="text",a.__input_textShadow="0 1px 1px ",b.bind(a.__input,"keydown",function(A){A.keyCode===13&&w.call(this)}),b.bind(a.__input,"blur",w),b.bind(a.__selector,"mousedown",function(){b.addClass(this,"drag").bind(window,"mouseup",function(){b.removeClass(s.__selector,"drag")})}),b.bind(a.__selector,"touchstart",function(){b.addClass(this,"drag").bind(window,"touchend",function(){b.removeClass(s.__selector,"drag")})});var f=document.createElement("div");T.extend(a.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),T.extend(a.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:a.__field_knob_border+(a.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),T.extend(a.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),T.extend(a.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),T.extend(f.style,{width:"100%",height:"100%",background:"none"}),Qt(f,"top","rgba(0,0,0,0)","#000"),T.extend(a.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),gr(a.__hue_field),T.extend(a.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:a.__input_textShadow+"rgba(0,0,0,0.7)"}),b.bind(a.__saturation_field,"mousedown",o),b.bind(a.__saturation_field,"touchstart",o),b.bind(a.__field_knob,"mousedown",o),b.bind(a.__field_knob,"touchstart",o),b.bind(a.__hue_field,"mousedown",p),b.bind(a.__hue_field,"touchstart",p);function o(A){k(A),b.bind(window,"mousemove",k),b.bind(window,"touchmove",k),b.bind(window,"mouseup",c),b.bind(window,"touchend",c)}function p(A){C(A),b.bind(window,"mousemove",C),b.bind(window,"touchmove",C),b.bind(window,"mouseup",g),b.bind(window,"touchend",g)}function c(){b.unbind(window,"mousemove",k),b.unbind(window,"touchmove",k),b.unbind(window,"mouseup",c),b.unbind(window,"touchend",c),S()}function g(){b.unbind(window,"mousemove",C),b.unbind(window,"touchmove",C),b.unbind(window,"mouseup",g),b.unbind(window,"touchend",g),S()}function w(){var A=St(this.value);A!==!1?(s.__color.__state=A,s.setValue(s.__color.toOriginal())):this.value=s.__color.toString()}function S(){s.__onFinishChange&&s.__onFinishChange.call(s,s.__color.toOriginal())}a.__saturation_field.appendChild(f),a.__selector.appendChild(a.__field_knob),a.__selector.appendChild(a.__saturation_field),a.__selector.appendChild(a.__hue_field),a.__hue_field.appendChild(a.__hue_knob),a.domElement.appendChild(a.__input),a.domElement.appendChild(a.__selector),a.updateDisplay();function k(A){A.type.indexOf("touch")===-1&&A.preventDefault();var M=s.__saturation_field.getBoundingClientRect(),F=A.touches&&A.touches[0]||A,H=F.clientX,P=F.clientY,N=(H-M.left)/(M.right-M.left),G=1-(P-M.top)/(M.bottom-M.top);return G>1?G=1:G<0&&(G=0),N>1?N=1:N<0&&(N=0),s.__color.v=G,s.__color.s=N,s.setValue(s.__color.toOriginal()),!1}function C(A){A.type.indexOf("touch")===-1&&A.preventDefault();var M=s.__hue_field.getBoundingClientRect(),F=A.touches&&A.touches[0]||A,H=F.clientY,P=1-(H-M.top)/(M.bottom-M.top);return P>1?P=1:P<0&&(P=0),s.__color.h=P*360,s.setValue(s.__color.toOriginal()),!1}return a}return me(t,[{key:"updateDisplay",value:function(){var r=St(this.getValue());if(r!==!1){var a=!1;T.each(re.COMPONENTS,function(o){if(!T.isUndefined(r[o])&&!T.isUndefined(this.__color.__state[o])&&r[o]!==this.__color.__state[o])return a=!0,{}},this),a&&T.extend(this.__color.__state,r)}T.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,f=255-s;T.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,Qt(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),T.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+f+","+f+","+f+",.7)"})}}]),t}(Me),_r=["-moz-","-o-","-webkit-","-ms-",""];function Qt(n,t,e,r){n.style.background="",T.each(_r,function(a){n.style.cssText+="background: "+a+"linear-gradient("+t+", "+e+" 0%, "+r+" 100%); "})}function gr(n){n.style.background="",n.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",n.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var br={load:function(t,e){var r=e||document,a=r.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=t,r.getElementsByTagName("head")[0].appendChild(a)},inject:function(t,e){var r=e||document,a=document.createElement("style");a.type="text/css",a.innerHTML=t;var s=r.getElementsByTagName("head")[0];try{s.appendChild(a)}catch{}}},yr=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,wr=function(t,e){var r=t[e];return T.isArray(arguments[2])||T.isObject(arguments[2])?new pr(t,e,arguments[2]):T.isNumber(r)?T.isNumber(arguments[2])&&T.isNumber(arguments[3])?T.isNumber(arguments[4])?new At(t,e,arguments[2],arguments[3],arguments[4]):new At(t,e,arguments[2],arguments[3]):T.isNumber(arguments[4])?new pt(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new pt(t,e,{min:arguments[2],max:arguments[3]}):T.isString(r)?new mr(t,e):T.isFunction(r)?new mn(t,e,""):T.isBoolean(r)?new hn(t,e):null};function Er(n){setTimeout(n,1e3/60)}var xr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||Er,Tr=function(){function n(){pe(this,n),this.backgroundElement=document.createElement("div"),T.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),b.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),T.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;b.bind(this.backgroundElement,"click",function(){t.hide()})}return me(n,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),T.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,r=function a(){e.domElement.style.display="none",e.backgroundElement.style.display="none",b.unbind(e.domElement,"webkitTransitionEnd",a),b.unbind(e.domElement,"transitionend",a),b.unbind(e.domElement,"oTransitionEnd",a)};b.bind(this.domElement,"webkitTransitionEnd",r),b.bind(this.domElement,"transitionend",r),b.bind(this.domElement,"oTransitionEnd",r),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-b.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-b.getHeight(this.domElement)/2+"px"}}]),n}(),Sr=ur(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);br.inject(Sr);var qt="dg",en=72,tn=20,tt="Default",We=function(){try{return!!window.localStorage}catch{return!1}}(),$e=void 0,nn=!0,Pe=void 0,bt=!1,vn=[],Z=function n(t){var e=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),b.addClass(this.domElement,qt),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=T.defaults(r,{closeOnTop:!1,autoPlace:!0,width:n.DEFAULT_WIDTH}),r=T.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),T.isUndefined(r.load)?r.load={preset:tt}:r.preset&&(r.load.preset=r.preset),T.isUndefined(r.parent)&&r.hideable&&vn.push(this),r.resizable=T.isUndefined(r.parent)&&r.resizable,r.autoPlace&&T.isUndefined(r.scrollable)&&(r.scrollable=!0);var a=We&&localStorage.getItem(Ne(this,"isLocal"))==="true",s=void 0,f=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return e.parent?e.getRoot().preset:r.load.preset},set:function(S){e.parent?e.getRoot().preset=S:r.load.preset=S,Or(this),e.revert()}},width:{get:function(){return r.width},set:function(S){r.width=S,Rt(e,S)}},name:{get:function(){return r.name},set:function(S){r.name=S,f&&(f.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(S){r.closed=S,r.closed?b.addClass(e.__ul,n.CLASS_CLOSED):b.removeClass(e.__ul,n.CLASS_CLOSED),this.onResize(),e.__closeButton&&(e.__closeButton.innerHTML=S?n.TEXT_OPEN:n.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return a},set:function(S){We&&(a=S,S?b.bind(window,"unload",s):b.unbind(window,"unload",s),localStorage.setItem(Ne(e,"isLocal"),S))}}}),T.isUndefined(r.parent)){if(this.closed=r.closed||!1,b.addClass(this.domElement,n.CLASS_MAIN),b.makeSelectable(this.domElement,!1),We&&a){e.useLocalStorage=!0;var o=localStorage.getItem(Ne(this,"gui"));o&&(r.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=n.TEXT_CLOSED,b.addClass(this.__closeButton,n.CLASS_CLOSE_BUTTON),r.closeOnTop?(b.addClass(this.__closeButton,n.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(b.addClass(this.__closeButton,n.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),b.bind(this.__closeButton,"click",function(){e.closed=!e.closed})}else{r.closed===void 0&&(r.closed=!0);var p=document.createTextNode(r.name);b.addClass(p,"controller-name"),f=It(e,p);var c=function(S){return S.preventDefault(),e.closed=!e.closed,!1};b.addClass(this.__ul,n.CLASS_CLOSED),b.addClass(f,"title"),b.bind(f,"click",c),r.closed||(this.closed=!1)}r.autoPlace&&(T.isUndefined(r.parent)&&(nn&&(Pe=document.createElement("div"),b.addClass(Pe,qt),b.addClass(Pe,n.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Pe),nn=!1),Pe.appendChild(this.domElement),b.addClass(this.domElement,n.CLASS_AUTO_PLACE)),this.parent||Rt(e,r.width)),this.__resizeHandler=function(){e.onResizeDebounced()},b.bind(window,"resize",this.__resizeHandler),b.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),b.bind(this.__ul,"transitionend",this.__resizeHandler),b.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&Cr(this),s=function(){We&&localStorage.getItem(Ne(e,"isLocal"))==="true"&&localStorage.setItem(Ne(e,"gui"),JSON.stringify(e.getSaveObject()))},this.saveToLocalStorageIfPossible=s;function g(){var w=e.getRoot();w.width+=1,T.defer(function(){w.width-=1})}r.parent||g()};Z.toggleHide=function(){bt=!bt,T.each(vn,function(n){n.domElement.style.display=bt?"none":""})};Z.CLASS_AUTO_PLACE="a";Z.CLASS_AUTO_PLACE_CONTAINER="ac";Z.CLASS_MAIN="main";Z.CLASS_CONTROLLER_ROW="cr";Z.CLASS_TOO_TALL="taller-than-window";Z.CLASS_CLOSED="closed";Z.CLASS_CLOSE_BUTTON="close-button";Z.CLASS_CLOSE_TOP="close-top";Z.CLASS_CLOSE_BOTTOM="close-bottom";Z.CLASS_DRAG="drag";Z.DEFAULT_WIDTH=245;Z.TEXT_CLOSED="Close Controls";Z.TEXT_OPEN="Open Controls";Z._keydownHandler=function(n){document.activeElement.type!=="text"&&(n.which===en||n.keyCode===en)&&Z.toggleHide()};b.bind(window,"keydown",Z._keydownHandler,!1);T.extend(Z.prototype,{add:function(t,e){return Ze(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return Ze(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;T.defer(function(){e.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Pe.removeChild(this.domElement);var t=this;T.each(this.__folders,function(e){t.removeFolder(e)}),b.unbind(window,"keydown",Z._keydownHandler,!1),rn(this)},addFolder:function(t){if(this.__folders[t]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var r=new Z(e);this.__folders[t]=r;var a=It(this,r.domElement);return b.addClass(a,"folder"),r},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],rn(t);var e=this;T.each(t.__folders,function(r){t.removeFolder(r)}),T.defer(function(){e.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=b.getOffset(t.__ul).top,r=0;T.each(t.__ul.childNodes,function(a){t.autoPlace&&a===t.__save_row||(r+=b.getHeight(a))}),window.innerHeight-e-tn<r?(b.addClass(t.domElement,Z.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-tn+"px"):(b.removeClass(t.domElement,Z.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&T.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:T.debounce(function(){this.onResize()},50),remember:function(){if(T.isUndefined($e)&&($e=new Tr,$e.domElement.innerHTML=yr),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;T.each(Array.prototype.slice.call(arguments),function(e){t.__rememberedObjects.length===0&&Lr(t),t.__rememberedObjects.indexOf(e)===-1&&t.__rememberedObjects.push(e)}),this.autoPlace&&Rt(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=it(this)),t.folders={},T.each(this.__folders,function(e,r){t.folders[r]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=it(this),Ct(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[tt]=it(this,!0)),this.load.remembered[t]=it(this),this.preset=t,Ot(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){T.each(this.__controllers,function(e){this.getRoot().load.remembered?_n(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),T.each(this.__folders,function(e){e.revert(e)}),t||Ct(this.getRoot(),!1)},listen:function(t){var e=this.__listening.length===0;this.__listening.push(t),e&&gn(this.__listening)},updateDisplay:function(){T.each(this.__controllers,function(t){t.updateDisplay()}),T.each(this.__folders,function(t){t.updateDisplay()})}});function It(n,t,e){var r=document.createElement("li");return t&&r.appendChild(t),e?n.__ul.insertBefore(r,e):n.__ul.appendChild(r),n.onResize(),r}function rn(n){b.unbind(window,"resize",n.__resizeHandler),n.saveToLocalStorageIfPossible&&b.unbind(window,"unload",n.saveToLocalStorageIfPossible)}function Ct(n,t){var e=n.__preset_select[n.__preset_select.selectedIndex];t?e.innerHTML=e.value+"*":e.innerHTML=e.value}function Ar(n,t,e){if(e.__li=t,e.__gui=n,T.extend(e,{options:function(f){if(arguments.length>1){var o=e.__li.nextElementSibling;return e.remove(),Ze(n,e.object,e.property,{before:o,factoryArgs:[T.toArray(arguments)]})}if(T.isArray(f)||T.isObject(f)){var p=e.__li.nextElementSibling;return e.remove(),Ze(n,e.object,e.property,{before:p,factoryArgs:[f]})}},name:function(f){return e.__li.firstElementChild.firstElementChild.innerHTML=f,e},listen:function(){return e.__gui.listen(e),e},remove:function(){return e.__gui.remove(e),e}}),e instanceof At){var r=new pt(e.object,e.property,{min:e.__min,max:e.__max,step:e.__step});T.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(s){var f=e[s],o=r[s];e[s]=r[s]=function(){var p=Array.prototype.slice.call(arguments);return o.apply(r,p),f.apply(e,p)}}),b.addClass(t,"has-slider"),e.domElement.insertBefore(r.domElement,e.domElement.firstElementChild)}else if(e instanceof pt){var a=function(f){if(T.isNumber(e.__min)&&T.isNumber(e.__max)){var o=e.__li.firstElementChild.firstElementChild.innerHTML,p=e.__gui.__listening.indexOf(e)>-1;e.remove();var c=Ze(n,e.object,e.property,{before:e.__li.nextElementSibling,factoryArgs:[e.__min,e.__max,e.__step]});return c.name(o),p&&c.listen(),c}return f};e.min=T.compose(a,e.min),e.max=T.compose(a,e.max)}else e instanceof hn?(b.bind(t,"click",function(){b.fakeEvent(e.__checkbox,"click")}),b.bind(e.__checkbox,"click",function(s){s.stopPropagation()})):e instanceof mn?(b.bind(t,"click",function(){b.fakeEvent(e.__button,"click")}),b.bind(t,"mouseover",function(){b.addClass(e.__button,"hover")}),b.bind(t,"mouseout",function(){b.removeClass(e.__button,"hover")})):e instanceof Lt&&(b.addClass(t,"color"),e.updateDisplay=T.compose(function(s){return t.style.borderLeftColor=e.__color.toString(),s},e.updateDisplay),e.updateDisplay());e.setValue=T.compose(function(s){return n.getRoot().__preset_select&&e.isModified()&&Ct(n.getRoot(),!0),s},e.setValue)}function _n(n,t){var e=n.getRoot(),r=e.__rememberedObjects.indexOf(t.object);if(r!==-1){var a=e.__rememberedObjectIndecesToControllers[r];if(a===void 0&&(a={},e.__rememberedObjectIndecesToControllers[r]=a),a[t.property]=t,e.load&&e.load.remembered){var s=e.load.remembered,f=void 0;if(s[n.preset])f=s[n.preset];else if(s[tt])f=s[tt];else return;if(f[r]&&f[r][t.property]!==void 0){var o=f[r][t.property];t.initialValue=o,t.setValue(o)}}}}function Ze(n,t,e,r){if(t[e]===void 0)throw new Error('Object "'+t+'" has no property "'+e+'"');var a=void 0;if(r.color)a=new Lt(t,e);else{var s=[t,e].concat(r.factoryArgs);a=wr.apply(n,s)}r.before instanceof Me&&(r.before=r.before.__li),_n(n,a),b.addClass(a.domElement,"c");var f=document.createElement("span");b.addClass(f,"property-name"),f.innerHTML=a.property;var o=document.createElement("div");o.appendChild(f),o.appendChild(a.domElement);var p=It(n,o,r.before);return b.addClass(p,Z.CLASS_CONTROLLER_ROW),a instanceof Lt?b.addClass(p,"color"):b.addClass(p,cr(a.getValue())),Ar(n,p,a),n.__controllers.push(a),a}function Ne(n,t){return document.location.href+"."+t}function Ot(n,t,e){var r=document.createElement("option");r.innerHTML=t,r.value=t,n.__preset_select.appendChild(r),e&&(n.__preset_select.selectedIndex=n.__preset_select.length-1)}function an(n,t){t.style.display=n.useLocalStorage?"block":"none"}function Lr(n){var t=n.__save_row=document.createElement("li");b.addClass(n.domElement,"has-save"),n.__ul.insertBefore(t,n.__ul.firstChild),b.addClass(t,"save-row");var e=document.createElement("span");e.innerHTML="&nbsp;",b.addClass(e,"button gears");var r=document.createElement("span");r.innerHTML="Save",b.addClass(r,"button"),b.addClass(r,"save");var a=document.createElement("span");a.innerHTML="New",b.addClass(a,"button"),b.addClass(a,"save-as");var s=document.createElement("span");s.innerHTML="Revert",b.addClass(s,"button"),b.addClass(s,"revert");var f=n.__preset_select=document.createElement("select");if(n.load&&n.load.remembered?T.each(n.load.remembered,function(w,S){Ot(n,S,S===n.preset)}):Ot(n,tt,!1),b.bind(f,"change",function(){for(var w=0;w<n.__preset_select.length;w++)n.__preset_select[w].innerHTML=n.__preset_select[w].value;n.preset=this.value}),t.appendChild(f),t.appendChild(e),t.appendChild(r),t.appendChild(a),t.appendChild(s),We){var o=document.getElementById("dg-local-explain"),p=document.getElementById("dg-local-storage"),c=document.getElementById("dg-save-locally");c.style.display="block",localStorage.getItem(Ne(n,"isLocal"))==="true"&&p.setAttribute("checked","checked"),an(n,o),b.bind(p,"change",function(){n.useLocalStorage=!n.useLocalStorage,an(n,o)})}var g=document.getElementById("dg-new-constructor");b.bind(g,"keydown",function(w){w.metaKey&&(w.which===67||w.keyCode===67)&&$e.hide()}),b.bind(e,"click",function(){g.innerHTML=JSON.stringify(n.getSaveObject(),void 0,2),$e.show(),g.focus(),g.select()}),b.bind(r,"click",function(){n.save()}),b.bind(a,"click",function(){var w=prompt("Enter a new preset name.");w&&n.saveAs(w)}),b.bind(s,"click",function(){n.revert()})}function Cr(n){var t=void 0;n.__resize_handle=document.createElement("div"),T.extend(n.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function e(s){return s.preventDefault(),n.width+=t-s.clientX,n.onResize(),t=s.clientX,!1}function r(){b.removeClass(n.__closeButton,Z.CLASS_DRAG),b.unbind(window,"mousemove",e),b.unbind(window,"mouseup",r)}function a(s){return s.preventDefault(),t=s.clientX,b.addClass(n.__closeButton,Z.CLASS_DRAG),b.bind(window,"mousemove",e),b.bind(window,"mouseup",r),!1}b.bind(n.__resize_handle,"mousedown",a),b.bind(n.__closeButton,"mousedown",a),n.domElement.insertBefore(n.__resize_handle,n.domElement.firstElementChild)}function Rt(n,t){n.domElement.style.width=t+"px",n.__save_row&&n.autoPlace&&(n.__save_row.style.width=t+"px"),n.__closeButton&&(n.__closeButton.style.width=t+"px")}function it(n,t){var e={};return T.each(n.__rememberedObjects,function(r,a){var s={},f=n.__rememberedObjectIndecesToControllers[a];T.each(f,function(o,p){s[p]=t?o.initialValue:o.getValue()}),e[a]=s}),e}function Or(n){for(var t=0;t<n.__preset_select.length;t++)n.__preset_select[t].value===n.preset&&(n.__preset_select.selectedIndex=t)}function gn(n){n.length!==0&&xr.call(window,function(){gn(n)}),T.each(n,function(t){t.updateDisplay()})}var Ue=new nr,be=new un(35,window.dom.clientWidth/window.dom.clientHeight,1,15e3);be.position.set(-300,0,-3e3);const Rr=new ne(-100,-50,-400);be.lookAt(Rr);Ue.add(be);var Be=new rr({antialias:!0,alpha:!0});Be.setSize(window.dom.clientWidth,window.dom.clientHeight);window.dom.appendChild(Be.domElement);var Ge=new sr;Ge.setSize(window.dom.clientWidth,window.dom.clientHeight);Ge.domElement.style.position="absolute";Ge.domElement.style.top=0;window.dom.appendChild(Ge.domElement);Be.localClippingEnabled=!1;Be.setClearColor(11192550);Be.sortObjects=!1;var Mr=new ar(0);Ue.add(Mr);var Dt=new ln(16777215,1);Dt.position.set(300,600,400);Ue.add(Dt);new qe(be,Ge.domElement);var bn=[];async function kr(){ir.forEach(n=>{new Tt().load(n,function(e){const r=new Ft({color:16751740,specular:4802889,shininess:200}),a=new ft(e,r);Ue.add(a),bn.push(a),console.log(a)})})}var Nr={render:dn,animate:cn,addModel:kr,meshes:bn};export{Nr as operation};
